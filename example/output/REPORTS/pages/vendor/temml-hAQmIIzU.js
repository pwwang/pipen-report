System.register([],function(){"use strict";return{execute:function(){class e{constructor(t,r){let n,a=" "+t;const o=r&&r.loc;if(o&&o.start<=o.end){const e=o.lexer.input;n=o.start;const t=o.end;n===e.length?a+=" at end of input: ":a+=" at position "+(n+1)+": \n";const r=e.slice(n,t).replace(/[^]/g,"$&̲");let s,i;s=n>15?"…"+e.slice(n-15,n):e.slice(0,n),i=t+15<e.length?e.slice(t,t+15)+"…":e.slice(t),a+=s+r+i}const s=new Error(a);return s.name="ParseError",s.__proto__=e.prototype,s.position=n,s}}e.prototype.__proto__=Error.prototype;const t=/([A-Z])/g,r={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},n=/[&><"']/g;const a=function(e){return"ordgroup"===e.type||"color"===e.type?1===e.body.length?a(e.body[0]):e:"font"===e.type?a(e.body):e};var o={deflt:function(e,t){return void 0===e?t:e},escape:function(e){return String(e).replace(n,e=>r[e])},hyphenate:function(e){return e.replace(t,"-$1").toLowerCase()},getBaseElem:a,isCharacterBox:function(e){const t=a(e);return"mathord"===t.type||"textord"===t.type||"atom"===t.type},protocolFromUrl:function(e){const t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?":"!==t[2]?null:/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?t[1].toLowerCase():null:"_relative"},round:function(e){return+e.toFixed(4)}};const s={},i={};function l({type:e,names:t,props:r,handler:n,mathmlBuilder:a}){const o={type:e,numArgs:r.numArgs,argTypes:r.argTypes,allowedInArgument:!!r.allowedInArgument,allowedInText:!!r.allowedInText,allowedInMath:void 0===r.allowedInMath||r.allowedInMath,numOptionalArgs:r.numOptionalArgs||0,infix:!!r.infix,primitive:!!r.primitive,handler:n};for(let e=0;e<t.length;++e)s[t[e]]=o;e&&a&&(i[e]=a)}function c({type:e,mathmlBuilder:t}){l({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},mathmlBuilder:t})}const u=function(e){return"ordgroup"===e.type&&1===e.body.length?e.body[0]:e},p=function(e){return"ordgroup"===e.type?e.body:[e]};class m{constructor(e){this.children=e,this.classes=[],this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createDocumentFragment();for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){return this.children.map(e=>e.toText()).join("")}}const d=function(e){return e.filter(e=>e).join(" ")},h=function(e,t){this.classes=e||[],this.attributes={},this.style=t||{}},g=function(e){const t=document.createElement(e);t.className=d(this.classes);for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t.style[e]=this.style[e]);for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&t.setAttribute(e,this.attributes[e]);for(let e=0;e<this.children.length;e++)t.appendChild(this.children[e].toNode());return t},b=function(e){let t=`<${e}`;this.classes.length&&(t+=` class="${o.escape(d(this.classes))}"`);let r="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(r+=`${o.hyphenate(e)}:${this.style[e]};`);r&&(t+=` style="${r}"`);for(const e in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,e)&&(t+=` ${e}="${o.escape(this.attributes[e])}"`);t+=">";for(let e=0;e<this.children.length;e++)t+=this.children[e].toMarkup();return t+=`</${e}>`,t};class f{constructor(e,t,r){h.call(this,e,r),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}toNode(){return g.call(this,"span")}toMarkup(){return b.call(this,"span")}}class y{constructor(e,t,r){this.href=e,this.classes=t,this.children=r||[]}toNode(){const e=document.createElement("a");e.setAttribute("href",this.href),this.classes.length>0&&(e.className=d(this.classes));for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e=`<a href='${o.escape(this.href)}'`;this.classes.length>0&&(e+=` class="${o.escape(d(this.classes))}"`),e+=">";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e+="</a>",e}}class x{constructor(e,t,r){this.alt=t,this.src=e,this.classes=["mord"],this.style=r}hasClass(e){return this.classes.includes(e)}toNode(){const e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(const t in this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);return e}toMarkup(){let e=`<img src='${this.src}' alt='${this.alt}'`,t="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${o.hyphenate(e)}:${this.style[e]};`);return t&&(e+=` style="${o.escape(t)}"`),e+=">",e}}class w{constructor(e,t,r,n){this.type=e,this.attributes={},this.children=t||[],this.classes=r||[],this.style=n||{},this.label=""}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}setLabel(e){this.label=e}toNode(){const e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(const t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=d(this.classes));for(const t in this.style)Object.prototype.hasOwnProperty.call(this.style,t)&&(e.style[t]=this.style[t]);for(let t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){let e="<"+this.type;for(const t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=o.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=` class="${o.escape(d(this.classes))}"`);let t="";for(const e in this.style)Object.prototype.hasOwnProperty.call(this.style,e)&&(t+=`${o.hyphenate(e)}:${this.style[e]};`);t&&(e+=` style="${t}"`),e+=">";for(let t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class v{constructor(e){this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return o.escape(this.toText())}toText(){return this.text}}const k=e=>{let t;return 1===e.length&&"mrow"===e[0].type?(t=e.pop(),t.type="mstyle"):t=new w("mstyle",e),t};var q={MathNode:w,TextNode:v,newDocumentFragment:function(e){return new m(e)}};const _=e=>{let t=0;if(e.body&&Array.isArray(e.body))for(const r of e.body)t+=_(r);else if(e.body)t+=_(e.body);else if("supsub"===e.type)t+=_(e.base),e.sub&&(t+=.7*_(e.sub)),e.sup&&(t+=.7*_(e.sup));else if("mathord"===e.type||"textord"===e.type)for(const r of e.text.split("")){const e=r.codePointAt(0);t+=96<e&&e<123||944<e&&e<970?.56:47<e&&e<58?.5:.92}else t+=1;return t},A={widehat:"^",widecheck:"ˇ",widetilde:"~",wideparen:"⏜",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",overparen:"⏜",undergroup:"⏡",underparen:"⏝",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xrightleftarrows:"⇄",xtofrom:"⇄",xleftrightharpoons:"⇋",xrightleftharpoons:"⇌",yields:"→",yieldsLeft:"←",mesomerism:"↔",longrightharpoonup:"⇀",longleftharpoondown:"↽",eqrightharpoonup:"⇀",eqleftharpoondown:"↽","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"=",yieldsLeftRight:"⇄",chemequilibrium:"⇌"},S=function(e){const t=new q.TextNode(A[e.slice(1)]),r=new q.MathNode("mo",[t]);return r.setAttribute("stretchy","true"),r},N=["\\widetilde","\\widehat","\\widecheck","\\utilde"];var T=S,$=e=>{const t=S(e.label);if(N.includes(e.label)){const r=_(e.base);1<r&&r<1.6?t.classes.push("tml-crooked-2"):1.6<=r&&r<2.5?t.classes.push("tml-crooked-3"):2.5<=r&&t.classes.push("tml-crooked-4")}return t};const B={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},M={math:{},text:{}};function O(e,t,r,n,a){M[e][n]={group:t,replace:r},a&&r&&(M[e][r]=M[e][n])}const C="math",z="text",L="accent-token",D="bin",I="close",F="inner",G="mathord",E="op-token",P="open",R="punct",j="rel",V="spacing",Z="textord";O(C,j,"≡","\\equiv",!0),O(C,j,"≺","\\prec",!0),O(C,j,"≻","\\succ",!0),O(C,j,"∼","\\sim",!0),O(C,j,"⟂","\\perp",!0),O(C,j,"⪯","\\preceq",!0),O(C,j,"⪰","\\succeq",!0),O(C,j,"≃","\\simeq",!0),O(C,j,"≌","\\backcong",!0),O(C,j,"|","\\mid",!0),O(C,j,"≪","\\ll",!0),O(C,j,"≫","\\gg",!0),O(C,j,"≍","\\asymp",!0),O(C,j,"∥","\\parallel"),O(C,j,"⌣","\\smile",!0),O(C,j,"⊑","\\sqsubseteq",!0),O(C,j,"⊒","\\sqsupseteq",!0),O(C,j,"≐","\\doteq",!0),O(C,j,"⌢","\\frown",!0),O(C,j,"∋","\\ni",!0),O(C,j,"∌","\\notni",!0),O(C,j,"∝","\\propto",!0),O(C,j,"⊢","\\vdash",!0),O(C,j,"⊣","\\dashv",!0),O(C,j,"∋","\\owns"),O(C,j,"≘","\\arceq",!0),O(C,j,"≙","\\wedgeq",!0),O(C,j,"≚","\\veeeq",!0),O(C,j,"≛","\\stareq",!0),O(C,j,"≝","\\eqdef",!0),O(C,j,"≞","\\measeq",!0),O(C,j,"≟","\\questeq",!0),O(C,j,"≠","\\ne",!0),O(C,j,"≠","\\neq"),O(C,j,"⩵","\\eqeq",!0),O(C,j,"⩶","\\eqeqeq",!0),O(C,j,"∷","\\dblcolon",!0),O(C,j,"≔","\\coloneqq",!0),O(C,j,"≕","\\eqqcolon",!0),O(C,j,"∹","\\eqcolon",!0),O(C,j,"⩴","\\Coloneqq",!0),O(C,R,".","\\ldotp"),O(C,R,"·","\\cdotp"),O(C,Z,"#","\\#"),O(z,Z,"#","\\#"),O(C,Z,"&","\\&"),O(z,Z,"&","\\&"),O(C,Z,"ℵ","\\aleph",!0),O(C,Z,"∀","\\forall",!0),O(C,Z,"ℏ","\\hbar",!0),O(C,Z,"∃","\\exists",!0),O(C,D,"∇","\\nabla",!0),O(C,Z,"♭","\\flat",!0),O(C,Z,"ℓ","\\ell",!0),O(C,Z,"♮","\\natural",!0),O(C,Z,"Å","\\Angstrom",!0),O(z,Z,"Å","\\Angstrom",!0),O(C,Z,"♣","\\clubsuit",!0),O(C,Z,"♧","\\varclubsuit",!0),O(C,Z,"℘","\\wp",!0),O(C,Z,"♯","\\sharp",!0),O(C,Z,"♢","\\diamondsuit",!0),O(C,Z,"♦","\\vardiamondsuit",!0),O(C,Z,"ℜ","\\Re",!0),O(C,Z,"♡","\\heartsuit",!0),O(C,Z,"♥","\\varheartsuit",!0),O(C,Z,"ℑ","\\Im",!0),O(C,Z,"♠","\\spadesuit",!0),O(C,Z,"♤","\\varspadesuit",!0),O(C,Z,"♀","\\female",!0),O(C,Z,"♂","\\male",!0),O(C,Z,"§","\\S",!0),O(z,Z,"§","\\S"),O(C,Z,"¶","\\P",!0),O(z,Z,"¶","\\P"),O(z,Z,"☺","\\smiley",!0),O(C,Z,"☺","\\smiley",!0),O(C,Z,"†","\\dag"),O(z,Z,"†","\\dag"),O(z,Z,"†","\\textdagger"),O(C,Z,"‡","\\ddag"),O(z,Z,"‡","\\ddag"),O(z,Z,"‡","\\textdaggerdbl"),O(C,I,"⎱","\\rmoustache",!0),O(C,P,"⎰","\\lmoustache",!0),O(C,I,"⟯","\\rgroup",!0),O(C,P,"⟮","\\lgroup",!0),O(C,D,"∓","\\mp",!0),O(C,D,"⊖","\\ominus",!0),O(C,D,"⊎","\\uplus",!0),O(C,D,"⊓","\\sqcap",!0),O(C,D,"∗","\\ast"),O(C,D,"⊔","\\sqcup",!0),O(C,D,"◯","\\bigcirc",!0),O(C,D,"∙","\\bullet",!0),O(C,D,"‡","\\ddagger"),O(C,D,"≀","\\wr",!0),O(C,D,"⨿","\\amalg"),O(C,D,"&","\\And"),O(C,D,"⫽","\\sslash",!0),O(C,j,"⟵","\\longleftarrow",!0),O(C,j,"⇐","\\Leftarrow",!0),O(C,j,"⟸","\\Longleftarrow",!0),O(C,j,"⟶","\\longrightarrow",!0),O(C,j,"⇒","\\Rightarrow",!0),O(C,j,"⟹","\\Longrightarrow",!0),O(C,j,"↔","\\leftrightarrow",!0),O(C,j,"⟷","\\longleftrightarrow",!0),O(C,j,"⇔","\\Leftrightarrow",!0),O(C,j,"⟺","\\Longleftrightarrow",!0),O(C,j,"↤","\\mapsfrom",!0),O(C,j,"↦","\\mapsto",!0),O(C,j,"⟼","\\longmapsto",!0),O(C,j,"↗","\\nearrow",!0),O(C,j,"↩","\\hookleftarrow",!0),O(C,j,"↪","\\hookrightarrow",!0),O(C,j,"↘","\\searrow",!0),O(C,j,"↼","\\leftharpoonup",!0),O(C,j,"⇀","\\rightharpoonup",!0),O(C,j,"↙","\\swarrow",!0),O(C,j,"↽","\\leftharpoondown",!0),O(C,j,"⇁","\\rightharpoondown",!0),O(C,j,"↖","\\nwarrow",!0),O(C,j,"⇌","\\rightleftharpoons",!0),O(C,G,"↯","\\lightning",!0),O(C,G,"∎","\\QED",!0),O(C,G,"‰","\\permil",!0),O(z,Z,"‰","\\permil"),O(C,G,"☉","\\astrosun",!0),O(C,G,"☼","\\sun",!0),O(C,G,"☾","\\leftmoon",!0),O(C,G,"☽","\\rightmoon",!0),O(C,G,"⊕","\\Earth"),O(C,j,"≮","\\nless",!0),O(C,j,"⪇","\\lneq",!0),O(C,j,"≨","\\lneqq",!0),O(C,j,"≨︀","\\lvertneqq"),O(C,j,"⋦","\\lnsim",!0),O(C,j,"⪉","\\lnapprox",!0),O(C,j,"⊀","\\nprec",!0),O(C,j,"⋠","\\npreceq",!0),O(C,j,"⋨","\\precnsim",!0),O(C,j,"⪹","\\precnapprox",!0),O(C,j,"≁","\\nsim",!0),O(C,j,"∤","\\nmid",!0),O(C,j,"∤","\\nshortmid"),O(C,j,"⊬","\\nvdash",!0),O(C,j,"⊭","\\nvDash",!0),O(C,j,"⋪","\\ntriangleleft"),O(C,j,"⋬","\\ntrianglelefteq",!0),O(C,j,"⊄","\\nsubset",!0),O(C,j,"⊅","\\nsupset",!0),O(C,j,"⊊","\\subsetneq",!0),O(C,j,"⊊︀","\\varsubsetneq"),O(C,j,"⫋","\\subsetneqq",!0),O(C,j,"⫋︀","\\varsubsetneqq"),O(C,j,"≯","\\ngtr",!0),O(C,j,"⪈","\\gneq",!0),O(C,j,"≩","\\gneqq",!0),O(C,j,"≩︀","\\gvertneqq"),O(C,j,"⋧","\\gnsim",!0),O(C,j,"⪊","\\gnapprox",!0),O(C,j,"⊁","\\nsucc",!0),O(C,j,"⋡","\\nsucceq",!0),O(C,j,"⋩","\\succnsim",!0),O(C,j,"⪺","\\succnapprox",!0),O(C,j,"≆","\\ncong",!0),O(C,j,"∦","\\nparallel",!0),O(C,j,"∦","\\nshortparallel"),O(C,j,"⊯","\\nVDash",!0),O(C,j,"⋫","\\ntriangleright"),O(C,j,"⋭","\\ntrianglerighteq",!0),O(C,j,"⊋","\\supsetneq",!0),O(C,j,"⊋","\\varsupsetneq"),O(C,j,"⫌","\\supsetneqq",!0),O(C,j,"⫌︀","\\varsupsetneqq"),O(C,j,"⊮","\\nVdash",!0),O(C,j,"⪵","\\precneqq",!0),O(C,j,"⪶","\\succneqq",!0),O(C,D,"⊴","\\unlhd"),O(C,D,"⊵","\\unrhd"),O(C,j,"↚","\\nleftarrow",!0),O(C,j,"↛","\\nrightarrow",!0),O(C,j,"⇍","\\nLeftarrow",!0),O(C,j,"⇏","\\nRightarrow",!0),O(C,j,"↮","\\nleftrightarrow",!0),O(C,j,"⇎","\\nLeftrightarrow",!0),O(C,j,"△","\\vartriangle"),O(C,Z,"ℏ","\\hslash"),O(C,Z,"▽","\\triangledown"),O(C,Z,"◊","\\lozenge"),O(C,Z,"Ⓢ","\\circledS"),O(C,Z,"®","\\circledR",!0),O(z,Z,"®","\\circledR"),O(z,Z,"®","\\textregistered"),O(C,Z,"∡","\\measuredangle",!0),O(C,Z,"∄","\\nexists"),O(C,Z,"℧","\\mho"),O(C,Z,"Ⅎ","\\Finv",!0),O(C,Z,"⅁","\\Game",!0),O(C,Z,"‵","\\backprime"),O(C,Z,"‶","\\backdprime"),O(C,Z,"‷","\\backtrprime"),O(C,Z,"▲","\\blacktriangle"),O(C,Z,"▼","\\blacktriangledown"),O(C,Z,"■","\\blacksquare"),O(C,Z,"⧫","\\blacklozenge"),O(C,Z,"★","\\bigstar"),O(C,Z,"∢","\\sphericalangle",!0),O(C,Z,"∁","\\complement",!0),O(C,Z,"╱","\\diagup"),O(C,Z,"╲","\\diagdown"),O(C,Z,"□","\\square"),O(C,Z,"□","\\Box"),O(C,Z,"◊","\\Diamond"),O(C,Z,"¥","\\yen",!0),O(z,Z,"¥","\\yen",!0),O(C,Z,"✓","\\checkmark",!0),O(z,Z,"✓","\\checkmark"),O(C,Z,"✗","\\ballotx",!0),O(z,Z,"✗","\\ballotx"),O(z,Z,"•","\\textbullet"),O(C,Z,"ℶ","\\beth",!0),O(C,Z,"ℸ","\\daleth",!0),O(C,Z,"ℷ","\\gimel",!0),O(C,Z,"ϝ","\\digamma",!0),O(C,Z,"ϰ","\\varkappa"),O(C,P,"⌜","\\ulcorner",!0),O(C,I,"⌝","\\urcorner",!0),O(C,P,"⌞","\\llcorner",!0),O(C,I,"⌟","\\lrcorner",!0),O(C,j,"≦","\\leqq",!0),O(C,j,"⩽","\\leqslant",!0),O(C,j,"⪕","\\eqslantless",!0),O(C,j,"≲","\\lesssim",!0),O(C,j,"⪅","\\lessapprox",!0),O(C,j,"≊","\\approxeq",!0),O(C,D,"⋖","\\lessdot"),O(C,j,"⋘","\\lll",!0),O(C,j,"≶","\\lessgtr",!0),O(C,j,"⋚","\\lesseqgtr",!0),O(C,j,"⪋","\\lesseqqgtr",!0),O(C,j,"≑","\\doteqdot"),O(C,j,"≓","\\risingdotseq",!0),O(C,j,"≒","\\fallingdotseq",!0),O(C,j,"∽","\\backsim",!0),O(C,j,"⋍","\\backsimeq",!0),O(C,j,"⫅","\\subseteqq",!0),O(C,j,"⋐","\\Subset",!0),O(C,j,"⊏","\\sqsubset",!0),O(C,j,"≼","\\preccurlyeq",!0),O(C,j,"⋞","\\curlyeqprec",!0),O(C,j,"≾","\\precsim",!0),O(C,j,"⪷","\\precapprox",!0),O(C,j,"⊲","\\vartriangleleft"),O(C,j,"⊴","\\trianglelefteq"),O(C,j,"⊨","\\vDash",!0),O(C,j,"⊫","\\VDash",!0),O(C,j,"⊪","\\Vvdash",!0),O(C,j,"⌣","\\smallsmile"),O(C,j,"⌢","\\smallfrown"),O(C,j,"≏","\\bumpeq",!0),O(C,j,"≎","\\Bumpeq",!0),O(C,j,"≧","\\geqq",!0),O(C,j,"⩾","\\geqslant",!0),O(C,j,"⪖","\\eqslantgtr",!0),O(C,j,"≳","\\gtrsim",!0),O(C,j,"⪆","\\gtrapprox",!0),O(C,D,"⋗","\\gtrdot"),O(C,j,"⋙","\\ggg",!0),O(C,j,"≷","\\gtrless",!0),O(C,j,"⋛","\\gtreqless",!0),O(C,j,"⪌","\\gtreqqless",!0),O(C,j,"≖","\\eqcirc",!0),O(C,j,"≗","\\circeq",!0),O(C,j,"≜","\\triangleq",!0),O(C,j,"∼","\\thicksim"),O(C,j,"≈","\\thickapprox"),O(C,j,"⫆","\\supseteqq",!0),O(C,j,"⋑","\\Supset",!0),O(C,j,"⊐","\\sqsupset",!0),O(C,j,"≽","\\succcurlyeq",!0),O(C,j,"⋟","\\curlyeqsucc",!0),O(C,j,"≿","\\succsim",!0),O(C,j,"⪸","\\succapprox",!0),O(C,j,"⊳","\\vartriangleright"),O(C,j,"⊵","\\trianglerighteq"),O(C,j,"⊩","\\Vdash",!0),O(C,j,"∣","\\shortmid"),O(C,j,"∥","\\shortparallel"),O(C,j,"≬","\\between",!0),O(C,j,"⋔","\\pitchfork",!0),O(C,j,"∝","\\varpropto"),O(C,j,"◀","\\blacktriangleleft"),O(C,j,"∴","\\therefore",!0),O(C,j,"∍","\\backepsilon"),O(C,j,"▶","\\blacktriangleright"),O(C,j,"∵","\\because",!0),O(C,j,"⋘","\\llless"),O(C,j,"⋙","\\gggtr"),O(C,D,"⊲","\\lhd"),O(C,D,"⊳","\\rhd"),O(C,j,"≂","\\eqsim",!0),O(C,j,"≑","\\Doteq",!0),O(C,j,"⥽","\\strictif",!0),O(C,j,"⥼","\\strictfi",!0),O(C,D,"∔","\\dotplus",!0),O(C,D,"∖","\\smallsetminus"),O(C,D,"⋒","\\Cap",!0),O(C,D,"⋓","\\Cup",!0),O(C,D,"⩞","\\doublebarwedge",!0),O(C,D,"⊟","\\boxminus",!0),O(C,D,"⊞","\\boxplus",!0),O(C,D,"⧄","\\boxslash",!0),O(C,D,"⋇","\\divideontimes",!0),O(C,D,"⋉","\\ltimes",!0),O(C,D,"⋊","\\rtimes",!0),O(C,D,"⋋","\\leftthreetimes",!0),O(C,D,"⋌","\\rightthreetimes",!0),O(C,D,"⋏","\\curlywedge",!0),O(C,D,"⋎","\\curlyvee",!0),O(C,D,"⊝","\\circleddash",!0),O(C,D,"⊛","\\circledast",!0),O(C,D,"⊺","\\intercal",!0),O(C,D,"⋒","\\doublecap"),O(C,D,"⋓","\\doublecup"),O(C,D,"⊠","\\boxtimes",!0),O(C,D,"⋈","\\bowtie",!0),O(C,D,"⋈","\\Join"),O(C,D,"⟕","\\leftouterjoin",!0),O(C,D,"⟖","\\rightouterjoin",!0),O(C,D,"⟗","\\fullouterjoin",!0),O(C,D,"∸","\\dotminus",!0),O(C,D,"⟑","\\wedgedot",!0),O(C,D,"⟇","\\veedot",!0),O(C,D,"⩢","\\doublebarvee",!0),O(C,D,"⩣","\\veedoublebar",!0),O(C,D,"⩟","\\wedgebar",!0),O(C,D,"⩠","\\wedgedoublebar",!0),O(C,D,"⩔","\\Vee",!0),O(C,D,"⩓","\\Wedge",!0),O(C,D,"⩃","\\barcap",!0),O(C,D,"⩂","\\barcup",!0),O(C,D,"⩈","\\capbarcup",!0),O(C,D,"⩀","\\capdot",!0),O(C,D,"⩇","\\capovercup",!0),O(C,D,"⩆","\\cupovercap",!0),O(C,D,"⩍","\\closedvarcap",!0),O(C,D,"⩌","\\closedvarcup",!0),O(C,D,"⨪","\\minusdot",!0),O(C,D,"⨫","\\minusfdots",!0),O(C,D,"⨬","\\minusrdots",!0),O(C,D,"⊻","\\Xor",!0),O(C,D,"⊼","\\Nand",!0),O(C,D,"⊽","\\Nor",!0),O(C,D,"⊽","\\barvee"),O(C,D,"⫴","\\interleave",!0),O(C,D,"⧢","\\shuffle",!0),O(C,D,"⫶","\\threedotcolon",!0),O(C,D,"⦂","\\typecolon",!0),O(C,D,"∾","\\invlazys",!0),O(C,D,"⩋","\\twocaps",!0),O(C,D,"⩊","\\twocups",!0),O(C,D,"⩎","\\Sqcap",!0),O(C,D,"⩏","\\Sqcup",!0),O(C,D,"⩖","\\veeonvee",!0),O(C,D,"⩕","\\wedgeonwedge",!0),O(C,D,"⧗","\\blackhourglass",!0),O(C,D,"⧆","\\boxast",!0),O(C,D,"⧈","\\boxbox",!0),O(C,D,"⧇","\\boxcircle",!0),O(C,D,"⊜","\\circledequal",!0),O(C,D,"⦷","\\circledparallel",!0),O(C,D,"⦶","\\circledvert",!0),O(C,D,"⦵","\\circlehbar",!0),O(C,D,"⟡","\\concavediamond",!0),O(C,D,"⟢","\\concavediamondtickleft",!0),O(C,D,"⟣","\\concavediamondtickright",!0),O(C,D,"⋄","\\diamond",!0),O(C,D,"⧖","\\hourglass",!0),O(C,D,"⟠","\\lozengeminus",!0),O(C,D,"⌽","\\obar",!0),O(C,D,"⦸","\\obslash",!0),O(C,D,"⨸","\\odiv",!0),O(C,D,"⧁","\\ogreaterthan",!0),O(C,D,"⧀","\\olessthan",!0),O(C,D,"⦹","\\operp",!0),O(C,D,"⨷","\\Otimes",!0),O(C,D,"⨶","\\otimeshat",!0),O(C,D,"⋆","\\star",!0),O(C,D,"△","\\triangle",!0),O(C,D,"⨺","\\triangleminus",!0),O(C,D,"⨹","\\triangleplus",!0),O(C,D,"⨻","\\triangletimes",!0),O(C,D,"⟤","\\whitesquaretickleft",!0),O(C,D,"⟥","\\whitesquaretickright",!0),O(C,D,"⨳","\\smashtimes",!0),O(C,j,"⇢","\\dashrightarrow",!0),O(C,j,"⇠","\\dashleftarrow",!0),O(C,j,"⇇","\\leftleftarrows",!0),O(C,j,"⇆","\\leftrightarrows",!0),O(C,j,"⇚","\\Lleftarrow",!0),O(C,j,"↞","\\twoheadleftarrow",!0),O(C,j,"↢","\\leftarrowtail",!0),O(C,j,"↫","\\looparrowleft",!0),O(C,j,"⇋","\\leftrightharpoons",!0),O(C,j,"↶","\\curvearrowleft",!0),O(C,j,"↺","\\circlearrowleft",!0),O(C,j,"↰","\\Lsh",!0),O(C,j,"⇈","\\upuparrows",!0),O(C,j,"↿","\\upharpoonleft",!0),O(C,j,"⇃","\\downharpoonleft",!0),O(C,j,"⊶","\\origof",!0),O(C,j,"⊷","\\imageof",!0),O(C,j,"⊸","\\multimap",!0),O(C,j,"↭","\\leftrightsquigarrow",!0),O(C,j,"⇉","\\rightrightarrows",!0),O(C,j,"⇄","\\rightleftarrows",!0),O(C,j,"↠","\\twoheadrightarrow",!0),O(C,j,"↣","\\rightarrowtail",!0),O(C,j,"↬","\\looparrowright",!0),O(C,j,"↷","\\curvearrowright",!0),O(C,j,"↻","\\circlearrowright",!0),O(C,j,"↱","\\Rsh",!0),O(C,j,"⇊","\\downdownarrows",!0),O(C,j,"↾","\\upharpoonright",!0),O(C,j,"⇂","\\downharpoonright",!0),O(C,j,"⇝","\\rightsquigarrow",!0),O(C,j,"⇝","\\leadsto"),O(C,j,"⇛","\\Rrightarrow",!0),O(C,j,"↾","\\restriction"),O(C,Z,"‘","`"),O(C,Z,"$","\\$"),O(z,Z,"$","\\$"),O(z,Z,"$","\\textdollar"),O(C,Z,"¢","\\cent"),O(z,Z,"¢","\\cent"),O(C,Z,"%","\\%"),O(z,Z,"%","\\%"),O(C,Z,"_","\\_"),O(z,Z,"_","\\_"),O(z,Z,"_","\\textunderscore"),O(z,Z,"␣","\\textvisiblespace",!0),O(C,Z,"∠","\\angle",!0),O(C,Z,"∞","\\infty",!0),O(C,Z,"′","\\prime"),O(C,Z,"″","\\dprime"),O(C,Z,"‴","\\trprime"),O(C,Z,"⁗","\\qprime"),O(C,Z,"△","\\triangle"),O(z,Z,"Α","\\Alpha",!0),O(z,Z,"Β","\\Beta",!0),O(z,Z,"Γ","\\Gamma",!0),O(z,Z,"Δ","\\Delta",!0),O(z,Z,"Ε","\\Epsilon",!0),O(z,Z,"Ζ","\\Zeta",!0),O(z,Z,"Η","\\Eta",!0),O(z,Z,"Θ","\\Theta",!0),O(z,Z,"Ι","\\Iota",!0),O(z,Z,"Κ","\\Kappa",!0),O(z,Z,"Λ","\\Lambda",!0),O(z,Z,"Μ","\\Mu",!0),O(z,Z,"Ν","\\Nu",!0),O(z,Z,"Ξ","\\Xi",!0),O(z,Z,"Ο","\\Omicron",!0),O(z,Z,"Π","\\Pi",!0),O(z,Z,"Ρ","\\Rho",!0),O(z,Z,"Σ","\\Sigma",!0),O(z,Z,"Τ","\\Tau",!0),O(z,Z,"Υ","\\Upsilon",!0),O(z,Z,"Φ","\\Phi",!0),O(z,Z,"Χ","\\Chi",!0),O(z,Z,"Ψ","\\Psi",!0),O(z,Z,"Ω","\\Omega",!0),O(C,G,"Α","\\Alpha",!0),O(C,G,"Β","\\Beta",!0),O(C,G,"Γ","\\Gamma",!0),O(C,G,"Δ","\\Delta",!0),O(C,G,"Ε","\\Epsilon",!0),O(C,G,"Ζ","\\Zeta",!0),O(C,G,"Η","\\Eta",!0),O(C,G,"Θ","\\Theta",!0),O(C,G,"Ι","\\Iota",!0),O(C,G,"Κ","\\Kappa",!0),O(C,G,"Λ","\\Lambda",!0),O(C,G,"Μ","\\Mu",!0),O(C,G,"Ν","\\Nu",!0),O(C,G,"Ξ","\\Xi",!0),O(C,G,"Ο","\\Omicron",!0),O(C,G,"Π","\\Pi",!0),O(C,G,"Ρ","\\Rho",!0),O(C,G,"Σ","\\Sigma",!0),O(C,G,"Τ","\\Tau",!0),O(C,G,"Υ","\\Upsilon",!0),O(C,G,"Φ","\\Phi",!0),O(C,G,"Χ","\\Chi",!0),O(C,G,"Ψ","\\Psi",!0),O(C,G,"Ω","\\Omega",!0),O(C,P,"¬","\\neg",!0),O(C,P,"¬","\\lnot"),O(C,Z,"⊤","\\top"),O(C,Z,"⊥","\\bot"),O(C,Z,"∅","\\emptyset"),O(C,Z,"⌀","\\varnothing"),O(C,G,"α","\\alpha",!0),O(C,G,"β","\\beta",!0),O(C,G,"γ","\\gamma",!0),O(C,G,"δ","\\delta",!0),O(C,G,"ϵ","\\epsilon",!0),O(C,G,"ζ","\\zeta",!0),O(C,G,"η","\\eta",!0),O(C,G,"θ","\\theta",!0),O(C,G,"ι","\\iota",!0),O(C,G,"κ","\\kappa",!0),O(C,G,"λ","\\lambda",!0),O(C,G,"μ","\\mu",!0),O(C,G,"ν","\\nu",!0),O(C,G,"ξ","\\xi",!0),O(C,G,"ο","\\omicron",!0),O(C,G,"π","\\pi",!0),O(C,G,"ρ","\\rho",!0),O(C,G,"σ","\\sigma",!0),O(C,G,"τ","\\tau",!0),O(C,G,"υ","\\upsilon",!0),O(C,G,"ϕ","\\phi",!0),O(C,G,"χ","\\chi",!0),O(C,G,"ψ","\\psi",!0),O(C,G,"ω","\\omega",!0),O(C,G,"ε","\\varepsilon",!0),O(C,G,"ϑ","\\vartheta",!0),O(C,G,"ϖ","\\varpi",!0),O(C,G,"ϱ","\\varrho",!0),O(C,G,"ς","\\varsigma",!0),O(C,G,"φ","\\varphi",!0),O(C,G,"Ϙ","\\Coppa",!0),O(C,G,"ϙ","\\coppa",!0),O(C,G,"ϙ","\\varcoppa",!0),O(C,G,"Ϟ","\\Koppa",!0),O(C,G,"ϟ","\\koppa",!0),O(C,G,"Ϡ","\\Sampi",!0),O(C,G,"ϡ","\\sampi",!0),O(C,G,"Ϛ","\\Stigma",!0),O(C,G,"ϛ","\\stigma",!0),O(C,G,"⫫","\\Bot"),O(C,Z,"ð","\\eth",!0),O(z,Z,"ð","ð"),O(C,Z,"Å","\\AA"),O(z,Z,"Å","\\AA",!0),O(C,Z,"Æ","\\AE",!0),O(z,Z,"Æ","\\AE",!0),O(C,Z,"Ð","\\DH",!0),O(z,Z,"Ð","\\DH",!0),O(C,Z,"Þ","\\TH",!0),O(z,Z,"Þ","\\TH",!0),O(C,Z,"ß","\\ss",!0),O(z,Z,"ß","\\ss",!0),O(C,Z,"å","\\aa"),O(z,Z,"å","\\aa",!0),O(C,Z,"æ","\\ae",!0),O(z,Z,"æ","\\ae",!0),O(C,Z,"ð","\\dh"),O(z,Z,"ð","\\dh",!0),O(C,Z,"þ","\\th",!0),O(z,Z,"þ","\\th",!0),O(C,Z,"Đ","\\DJ",!0),O(z,Z,"Đ","\\DJ",!0),O(C,Z,"đ","\\dj",!0),O(z,Z,"đ","\\dj",!0),O(C,Z,"Ł","\\L",!0),O(z,Z,"Ł","\\L",!0),O(C,Z,"Ł","\\l",!0),O(z,Z,"Ł","\\l",!0),O(C,Z,"Ŋ","\\NG",!0),O(z,Z,"Ŋ","\\NG",!0),O(C,Z,"ŋ","\\ng",!0),O(z,Z,"ŋ","\\ng",!0),O(C,Z,"Œ","\\OE",!0),O(z,Z,"Œ","\\OE",!0),O(C,Z,"œ","\\oe",!0),O(z,Z,"œ","\\oe",!0),O(C,D,"∗","∗",!0),O(C,D,"+","+"),O(C,D,"∗","*"),O(C,D,"⁄","/",!0),O(C,D,"⁄","⁄"),O(C,D,"−","-",!0),O(C,D,"⋅","\\cdot",!0),O(C,D,"∘","\\circ",!0),O(C,D,"÷","\\div",!0),O(C,D,"±","\\pm",!0),O(C,D,"×","\\times",!0),O(C,D,"∩","\\cap",!0),O(C,D,"∪","\\cup",!0),O(C,D,"∖","\\setminus",!0),O(C,D,"∧","\\land"),O(C,D,"∨","\\lor"),O(C,D,"∧","\\wedge",!0),O(C,D,"∨","\\vee",!0),O(C,P,"⟦","\\llbracket",!0),O(C,I,"⟧","\\rrbracket",!0),O(C,P,"⟨","\\langle",!0),O(C,P,"⟪","\\lAngle",!0),O(C,P,"⦉","\\llangle",!0),O(C,P,"|","\\lvert"),O(C,P,"‖","\\lVert",!0),O(C,Z,"!","\\oc"),O(C,Z,"?","\\wn"),O(C,Z,"↓","\\shpos"),O(C,Z,"↕","\\shift"),O(C,Z,"↑","\\shneg"),O(C,I,"?","?"),O(C,I,"!","!"),O(C,I,"‼","‼"),O(C,I,"⟩","\\rangle",!0),O(C,I,"⟫","\\rAngle",!0),O(C,I,"⦊","\\rrangle",!0),O(C,I,"|","\\rvert"),O(C,I,"‖","\\rVert"),O(C,P,"⦃","\\lBrace",!0),O(C,I,"⦄","\\rBrace",!0),O(C,j,"=","\\equal",!0),O(C,j,":",":"),O(C,j,"≈","\\approx",!0),O(C,j,"≅","\\cong",!0),O(C,j,"≥","\\ge"),O(C,j,"≥","\\geq",!0),O(C,j,"←","\\gets"),O(C,j,">","\\gt",!0),O(C,j,"∈","\\in",!0),O(C,j,"∉","\\notin",!0),O(C,j,"","\\@not"),O(C,j,"⊂","\\subset",!0),O(C,j,"⊃","\\supset",!0),O(C,j,"⊆","\\subseteq",!0),O(C,j,"⊇","\\supseteq",!0),O(C,j,"⊈","\\nsubseteq",!0),O(C,j,"⊈","\\nsubseteqq"),O(C,j,"⊉","\\nsupseteq",!0),O(C,j,"⊉","\\nsupseteqq"),O(C,j,"⊨","\\models"),O(C,j,"←","\\leftarrow",!0),O(C,j,"≤","\\le"),O(C,j,"≤","\\leq",!0),O(C,j,"<","\\lt",!0),O(C,j,"→","\\rightarrow",!0),O(C,j,"→","\\to"),O(C,j,"≱","\\ngeq",!0),O(C,j,"≱","\\ngeqq"),O(C,j,"≱","\\ngeqslant"),O(C,j,"≰","\\nleq",!0),O(C,j,"≰","\\nleqq"),O(C,j,"≰","\\nleqslant"),O(C,j,"⫫","\\Perp",!0),O(C,V," ","\\ "),O(C,V," ","\\space"),O(C,V," ","\\nobreakspace"),O(z,V," ","\\ "),O(z,V," "," "),O(z,V," ","\\space"),O(z,V," ","\\nobreakspace"),O(C,V,null,"\\nobreak"),O(C,V,null,"\\allowbreak"),O(C,R,",",","),O(z,R,":",":"),O(C,R,";",";"),O(C,D,"⊼","\\barwedge"),O(C,D,"⊻","\\veebar"),O(C,D,"⊙","\\odot",!0),O(C,D,"⊕︎","\\oplus"),O(C,D,"⊗","\\otimes",!0),O(C,Z,"∂","\\partial",!0),O(C,D,"⊘","\\oslash",!0),O(C,D,"⊚","\\circledcirc",!0),O(C,D,"⊡","\\boxdot",!0),O(C,D,"△","\\bigtriangleup"),O(C,D,"▽","\\bigtriangledown"),O(C,D,"†","\\dagger"),O(C,D,"⋄","\\diamond"),O(C,D,"◃","\\triangleleft"),O(C,D,"▹","\\triangleright"),O(C,P,"{","\\{"),O(z,Z,"{","\\{"),O(z,Z,"{","\\textbraceleft"),O(C,I,"}","\\}"),O(z,Z,"}","\\}"),O(z,Z,"}","\\textbraceright"),O(C,P,"{","\\lbrace"),O(C,I,"}","\\rbrace"),O(C,P,"[","\\lbrack",!0),O(z,Z,"[","\\lbrack",!0),O(C,I,"]","\\rbrack",!0),O(z,Z,"]","\\rbrack",!0),O(C,P,"(","\\lparen",!0),O(C,I,")","\\rparen",!0),O(C,P,"⦇","\\llparenthesis",!0),O(C,I,"⦈","\\rrparenthesis",!0),O(z,Z,"<","\\textless",!0),O(z,Z,">","\\textgreater",!0),O(C,P,"⌊","\\lfloor",!0),O(C,I,"⌋","\\rfloor",!0),O(C,P,"⌈","\\lceil",!0),O(C,I,"⌉","\\rceil",!0),O(C,Z,"\\","\\backslash"),O(C,Z,"|","|"),O(C,Z,"|","\\vert"),O(z,Z,"|","\\textbar",!0),O(C,Z,"‖","\\|"),O(C,Z,"‖","\\Vert"),O(z,Z,"‖","\\textbardbl"),O(z,Z,"~","\\textasciitilde"),O(z,Z,"\\","\\textbackslash"),O(z,Z,"^","\\textasciicircum"),O(C,j,"↑","\\uparrow",!0),O(C,j,"⇑","\\Uparrow",!0),O(C,j,"↓","\\downarrow",!0),O(C,j,"⇓","\\Downarrow",!0),O(C,j,"↕","\\updownarrow",!0),O(C,j,"⇕","\\Updownarrow",!0),O(C,E,"∐","\\coprod"),O(C,E,"⋁","\\bigvee"),O(C,E,"⋀","\\bigwedge"),O(C,E,"⨄","\\biguplus"),O(C,E,"⨄","\\bigcupplus"),O(C,E,"⨃","\\bigcupdot"),O(C,E,"⨇","\\bigdoublevee"),O(C,E,"⨈","\\bigdoublewedge"),O(C,E,"⋂","\\bigcap"),O(C,E,"⋃","\\bigcup"),O(C,E,"∫","\\int"),O(C,E,"∫","\\intop"),O(C,E,"∬","\\iint"),O(C,E,"∭","\\iiint"),O(C,E,"∏","\\prod"),O(C,E,"∑","\\sum"),O(C,E,"⨂","\\bigotimes"),O(C,E,"⨁","\\bigoplus"),O(C,E,"⨀","\\bigodot"),O(C,E,"⨉","\\bigtimes"),O(C,E,"∮","\\oint"),O(C,E,"∯","\\oiint"),O(C,E,"∰","\\oiiint"),O(C,E,"∱","\\intclockwise"),O(C,E,"∲","\\varointclockwise"),O(C,E,"⨌","\\iiiint"),O(C,E,"⨍","\\intbar"),O(C,E,"⨎","\\intBar"),O(C,E,"⨏","\\fint"),O(C,E,"⨒","\\rppolint"),O(C,E,"⨓","\\scpolint"),O(C,E,"⨕","\\pointint"),O(C,E,"⨖","\\sqint"),O(C,E,"⨗","\\intlarhk"),O(C,E,"⨘","\\intx"),O(C,E,"⨙","\\intcap"),O(C,E,"⨚","\\intcup"),O(C,E,"⨅","\\bigsqcap"),O(C,E,"⨆","\\bigsqcup"),O(C,E,"∫","\\smallint"),O(z,F,"…","\\textellipsis"),O(C,F,"…","\\mathellipsis"),O(z,F,"…","\\ldots",!0),O(C,F,"…","\\ldots",!0),O(C,F,"⋰","\\iddots",!0),O(C,F,"⋯","\\@cdots",!0),O(C,F,"⋱","\\ddots",!0),O(C,Z,"⋮","\\varvdots"),O(z,Z,"⋮","\\varvdots"),O(C,L,"´","\\acute"),O(C,L,"`","\\grave"),O(C,L,"¨","\\ddot"),O(C,L,"…","\\dddot"),O(C,L,"….","\\ddddot"),O(C,L,"~","\\tilde"),O(C,L,"‾","\\bar"),O(C,L,"˘","\\breve"),O(C,L,"ˇ","\\check"),O(C,L,"^","\\hat"),O(C,L,"→","\\vec"),O(C,L,"˙","\\dot"),O(C,L,"˚","\\mathring"),O(C,G,"ı","\\imath",!0),O(C,G,"ȷ","\\jmath",!0),O(C,Z,"ı","ı"),O(C,Z,"ȷ","ȷ"),O(z,Z,"ı","\\i",!0),O(z,Z,"ȷ","\\j",!0),O(z,Z,"ø","\\o",!0),O(C,G,"ø","\\o",!0),O(z,Z,"Ø","\\O",!0),O(C,G,"Ø","\\O",!0),O(z,L,"ˊ","\\'"),O(z,L,"ˋ","\\`"),O(z,L,"ˆ","\\^"),O(z,L,"~","\\~"),O(z,L,"ˉ","\\="),O(z,L,"˘","\\u"),O(z,L,"˙","\\."),O(z,L,"¸","\\c"),O(z,L,"˚","\\r"),O(z,L,"ˇ","\\v");O(z,L,"¨",'\\"'),O(z,L,"˝","\\H"),O(C,L,"ˊ","\\'"),O(C,L,"ˋ","\\`"),O(C,L,"ˆ","\\^"),O(C,L,"~","\\~"),O(C,L,"ˉ","\\="),O(C,L,"˘","\\u"),O(C,L,"˙","\\."),O(C,L,"¸","\\c"),O(C,L,"˚","\\r"),O(C,L,"ˇ","\\v"),O(C,L,"¨",'\\"'),O(C,L,"˝","\\H");const H={"--":!0,"---":!0,"``":!0,"''":!0};O(z,Z,"–","--",!0),O(z,Z,"–","\\textendash"),O(z,Z,"—","---",!0),O(z,Z,"—","\\textemdash"),O(z,Z,"‘","`",!0),O(z,Z,"‘","\\textquoteleft"),O(z,Z,"’","'",!0),O(z,Z,"’","\\textquoteright"),O(z,Z,"“","``",!0),O(z,Z,"“","\\textquotedblleft"),O(z,Z,"”","''",!0),O(z,Z,"”","\\textquotedblright"),O(C,Z,"°","\\degree",!0),O(z,Z,"°","\\degree"),O(z,Z,"°","\\textdegree",!0),O(C,Z,"£","\\pounds"),O(C,Z,"£","\\mathsterling",!0),O(z,Z,"£","\\pounds"),O(z,Z,"£","\\textsterling",!0),O(C,Z,"✠","\\maltese"),O(z,Z,"✠","\\maltese"),O(C,Z,"€","\\euro",!0),O(z,Z,"€","\\euro",!0),O(z,Z,"€","\\texteuro"),O(C,Z,"©","\\copyright",!0),O(z,Z,"©","\\textcopyright"),O(C,Z,"⌀","\\diameter",!0),O(z,Z,"⌀","\\diameter"),O(C,Z,"𝛤","\\varGamma"),O(C,Z,"𝛥","\\varDelta"),O(C,Z,"𝛩","\\varTheta"),O(C,Z,"𝛬","\\varLambda"),O(C,Z,"𝛯","\\varXi"),O(C,Z,"𝛱","\\varPi"),O(C,Z,"𝛴","\\varSigma"),O(C,Z,"𝛶","\\varUpsilon"),O(C,Z,"𝛷","\\varPhi"),O(C,Z,"𝛹","\\varPsi"),O(C,Z,"𝛺","\\varOmega"),O(z,Z,"𝛤","\\varGamma"),O(z,Z,"𝛥","\\varDelta"),O(z,Z,"𝛩","\\varTheta"),O(z,Z,"𝛬","\\varLambda"),O(z,Z,"𝛯","\\varXi"),O(z,Z,"𝛱","\\varPi"),O(z,Z,"𝛴","\\varSigma"),O(z,Z,"𝛶","\\varUpsilon"),O(z,Z,"𝛷","\\varPhi"),O(z,Z,"𝛹","\\varPsi"),O(z,Z,"𝛺","\\varOmega");const U='0123456789/@."';for(let e=0;e<14;e++){const t=U.charAt(e);O(C,Z,t,t)}const X='0123456789!@*()-=+";:?/.,';for(let e=0;e<25;e++){const t=X.charAt(e);O(z,Z,t,t)}const W="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(let e=0;e<52;e++){const t=W.charAt(e);O(C,G,t,t),O(z,Z,t,t)}const K="ÇÐÞçþℂℍℕℙℚℝℤℎℏℊℋℌℐℑℒℓ℘ℛℜℬℰℱℳℭℨ";for(let e=0;e<30;e++){const t=K.charAt(e);O(C,G,t,t),O(z,Z,t,t)}let J="";for(let e=0;e<52;e++){J=String.fromCharCode(55349,56320+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56372+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56424+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56580+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56736+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56788+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56840+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56944+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,56632+e),O(C,G,J,J),O(z,Z,J,J);const t=W.charAt(e);J=String.fromCharCode(55349,56476+e),O(C,G,t,J),O(z,Z,t,J)}for(let e=0;e<10;e++)J=String.fromCharCode(55349,57294+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,57314+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,57324+e),O(C,G,J,J),O(z,Z,J,J),J=String.fromCharCode(55349,57334+e),O(C,G,J,J),O(z,Z,J,J);const Q=function(e,t,r){return!M[t][e]||!M[t][e].replace||55349===e.charCodeAt(0)||Object.prototype.hasOwnProperty.call(H,e)&&r&&(r.fontFamily&&"tt"===r.fontFamily.slice(4,6)||r.font&&"tt"===r.font.slice(4,6))||(e=M[t][e].replace),new q.TextNode(e)},Y=(e,t)=>{if(0===e.children.length||"mtext"!==e.children[e.children.length-1].type){const r=new q.MathNode("mtext",[new q.TextNode(t.children[0].text)]);e.children.push(r)}else e.children[e.children.length-1].children[0].text+=t.children[0].text},ee=e=>{if("mrow"!==e.type&&"mstyle"!==e.type)return e;if(0===e.children.length)return e;const t=new q.MathNode("mrow");for(let r=0;r<e.children.length;r++){const n=e.children[r];if("mtext"===n.type&&0===Object.keys(n.attributes).length)Y(t,n);else if("mrow"===n.type){let e=!0;for(let t=0;t<n.children.length;t++){if("mtext"!==n.children[t].type||0!==Object.keys(n.attributes).length){e=!1;break}}if(e)for(let e=0;e<n.children.length;e++){const r=n.children[e];Y(t,r)}else t.children.push(n)}else t.children.push(n)}for(let r=0;r<t.children.length;r++)if("mtext"===t.children[r].type){const n=t.children[r];" "===n.children[0].text.charAt(0)&&(n.children[0].text=" "+n.children[0].text.slice(1));const a=n.children[0].text.length;a>0&&" "===n.children[0].text.charAt(a-1)&&(n.children[0].text=n.children[0].text.slice(0,-1)+" ");for(const[t,r]of Object.entries(e.attributes))n.attributes[t]=r}return 1===t.children.length&&"mtext"===t.children[0].type?t.children[0]:t},te=function(e,t=!1){if(!(1!==e.length||e[0]instanceof m))return e[0];if(!t){e[0]instanceof w&&"mo"===e[0].type&&!e[0].attributes.fence&&(e[0].attributes.lspace="0em",e[0].attributes.rspace="0em");const t=e.length-1;e[t]instanceof w&&"mo"===e[t].type&&!e[t].attributes.fence&&(e[t].attributes.lspace="0em",e[t].attributes.rspace="0em")}return new q.MathNode("mrow",e)};function re(e){if(!e)return!1;if("mi"===e.type&&1===e.children.length){const t=e.children[0];return t instanceof v&&"."===t.text}if("mtext"===e.type&&1===e.children.length){const t=e.children[0];return t instanceof v&&" "===t.text}if("mo"===e.type&&1===e.children.length&&"true"===e.getAttribute("separator")&&"0em"===e.getAttribute("lspace")&&"0em"===e.getAttribute("rspace")){const t=e.children[0];return t instanceof v&&","===t.text}return!1}const ne=(e,t)=>{const r=e[t],n=e[t+1];return"atom"===r.type&&","===r.text&&r.loc&&n.loc&&r.loc.end===n.loc.start},ae=e=>"atom"===e.type&&"rel"===e.family||"mclass"===e.type&&"mrel"===e.mclass,oe=function(e,t,r=!1){if(!r&&1===e.length){const r=ie(e[0],t);return r instanceof w&&"mo"===r.type&&(r.setAttribute("lspace","0em"),r.setAttribute("rspace","0em")),[r]}const n=[],a=[];let o;for(let r=0;r<e.length;r++)a.push(ie(e[r],t));for(let t=0;t<a.length;t++){const r=a[t];if(t<e.length-1&&ae(e[t])&&ae(e[t+1])&&r.setAttribute("rspace","0em"),t>0&&ae(e[t])&&ae(e[t-1])&&r.setAttribute("lspace","0em"),"mn"===r.type&&o&&"mn"===o.type)o.children.push(...r.children);else if(re(r)&&o&&"mn"===o.type)o.children.push(...r.children);else if(o&&"mn"===o.type&&t<a.length-1&&"mn"===a[t+1].type&&ne(e,t))o.children.push(...r.children);else{if("mn"===r.type&&re(o))r.children=[...o.children,...r.children],n.pop();else if(("msup"===r.type||"msub"===r.type)&&r.children.length>=1&&o&&("mn"===o.type||re(o))){const e=r.children[0];e instanceof w&&"mn"===e.type&&o&&(e.children=[...o.children,...e.children],n.pop())}n.push(r),o=r}}return n},se=function(e,t,r=!1){return te(oe(e,t,r),r)},ie=function(t,r){if(!t)return new q.MathNode("mrow");if(i[t.type]){return i[t.type](t,r)}throw new e("Got group of unknown type: '"+t.type+"'")},le=(e,t)=>{const r=e.isStretchy?$(e):new q.MathNode("mo",[Q(e.label,e.mode)]);e.isStretchy||r.setAttribute("stretchy","false"),"\\vec"!==e.label&&(r.style.mathDepth="0");const n="\\c"===e.label?"munder":"mover",a=ue.has(e.label);if("mover"===n&&"math"===e.mode&&!e.isStretchy&&e.base.text&&1===e.base.text.length){const t=e.base.text,n="\\vec"===e.label,o="\\vec"===n?"-vec":"";n&&r.classes.push("tml-vec");const s=n?"-vec":a?"-acc":"";"DHKLUcegorsuvxyzΠΥΨαδηιμνοτυχϵ".indexOf(t)>-1?(r.classes.push(`chr-sml${o}`),r.classes.push(`wbk-sml${s}`)):"BCEGIMNOPQRSTXZlpqtwΓΘΞΣΦΩβεζθξρςφψϑϕϱ".indexOf(t)>-1?(r.classes.push(`chr-med${o}`),r.classes.push(`wbk-med${s}`)):"AFJdfΔΛ".indexOf(t)>-1?(r.classes.push(`chr-lrg${o}`),r.classes.push(`wbk-lrg${s}`)):n?r.classes.push("wbk-vec"):a&&r.classes.push("wbk-acc")}else a&&r.classes.push("wbk-acc");return new q.MathNode(n,[ie(e.base,t),r])},ce=new Set(["\\acute","\\check","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"]),ue=new Set(["\\acute","\\bar","\\breve","\\check","\\dot","\\ddot","\\grave","\\hat","\\mathring","\\`","\\'","\\^","\\=","\\u","\\.",'\\"',"\\r","\\H","\\v"]),pe={"\\`":"̀","\\'":"́","\\^":"̂","\\~":"̃","\\=":"̄","\\u":"̆","\\.":"̇",'\\"':"̈","\\r":"̊","\\H":"̋","\\v":"̌","\\c":"̧"};l({type:"accent",names:["\\acute","\\grave","\\ddot","\\dddot","\\ddddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\overparen","\\widecheck","\\widehat","\\wideparen","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{const r=u(t[0]),n=!ce.has(e.funcName);return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:n,base:r}},mathmlBuilder:le}),l({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\c","\\u","\\.",'\\"',"\\r","\\H","\\v"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{const r=u(t[0]),n=e.parser.mode;return"math"===n&&e.parser.settings.strict&&console.log(`Temml parse error: Command ${e.funcName} is invalid in math mode.`),"text"===n&&r.text&&1===r.text.length&&e.funcName in pe&&"acegıȷmnopqrsuvwxyzαγεηικμνοπρςστυχωϕ𝐚𝐜𝐞𝐠𝐦𝐧𝐨𝐩𝐪𝐫𝐬𝐮𝐯𝐰𝐱𝐲𝐳".indexOf(r.text)>-1?{type:"textord",mode:"text",text:r.text+pe[e.funcName]}:"\\c"===e.funcName&&"text"===n&&r.text&&1===r.text.length?{type:"textord",mode:"text",text:r.text+"̧"}:{type:"accent",mode:n,label:e.funcName,isStretchy:!1,base:r}},mathmlBuilder:le}),l({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underparen","\\utilde"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>{const n=r[0];return{type:"accentUnder",mode:e.mode,label:t,base:n}},mathmlBuilder:(e,t)=>{const r=$(e);r.style["math-depth"]=0;return new q.MathNode("munder",[ie(e.base,t),r])}});const me={pt:800/803,pc:9600/803,dd:1238/1157*800/803,cc:12.792133216944668,nd:685/642*800/803,nc:1370/107*800/803,sp:1/65536*800/803,mm:25.4/72,cm:2.54/72,in:1/72,px:96/72},de=["em","ex","mu","pt","mm","cm","in","px","bp","pc","dd","cc","nd","nc","sp"],he=e=>[1,.7,.5][Math.max(e-1,0)],ge=function(t,r){let n=t.number;if(r.maxSize[0]<0&&n>0)return{number:0,unit:"em"};const a=t.unit;switch(a){case"mm":case"cm":case"in":case"px":return n*me[a]>r.maxSize[1]?{number:r.maxSize[1],unit:"pt"}:{number:n,unit:a};case"em":case"ex":return"ex"===a&&(n*=.431),n=Math.min(n/he(r.level),r.maxSize[0]),{number:o.round(n),unit:"em"};case"bp":return n>r.maxSize[1]&&(n=r.maxSize[1]),{number:n,unit:"pt"};case"pt":case"pc":case"dd":case"cc":case"nd":case"nc":case"sp":return n=Math.min(n*me[a],r.maxSize[1]),{number:o.round(n),unit:"pt"};case"mu":return n=Math.min(n/18,r.maxSize[0]),{number:o.round(n),unit:"em"};default:throw new e("Invalid unit: '"+a+"'")}},be=e=>{const t=new q.MathNode("mspace");return t.setAttribute("width",e+"em"),t},fe=(e,t=.3,r=0,n=!1)=>{if(null==e&&0===r)return be(t);const a=e?[e]:[];if(0!==t&&a.unshift(be(t)),r>0&&a.push(be(r)),n){const e=new q.MathNode("mpadded",a);return e.setAttribute("height","0.1px"),e}return new q.MathNode("mrow",a)},ye=(e,t)=>Number(e)/he(t),xe=(e,t,r,n)=>{const a=T(e),o="eq"===e.slice(1,3),s="x"===e.charAt(1)?"1.75":"cd"===e.slice(2,4)?"3.0":o?"1.0":"2.0";a.setAttribute("lspace","0"),a.setAttribute("rspace",o?"0.5em":"0");const i=n.withLevel(n.level<2?2:3),l=ye(s,i.level),c=ye(s,3),u=fe(null,l.toFixed(4),0),p=fe(null,c.toFixed(4),0),m=ye(o?0:.3,i.level).toFixed(4);let d,h;const g=t&&t.body&&(t.body.body||t.body.length>0);if(g){let r=ie(t,i);r=fe(r,m,m,"\\\\cdrightarrow"===e||"\\\\cdleftarrow"===e),d=new q.MathNode("mover",[r,p])}const b=r&&r.body&&(r.body.body||r.body.length>0);if(b){let e=ie(r,i);e=fe(e,m,m),h=new q.MathNode("munder",[e,p])}let f;return f=g||b?g&&b?new q.MathNode("munderover",[a,h,d]):g?new q.MathNode("mover",[a,d]):new q.MathNode("munder",[a,h]):new q.MathNode("mover",[a,u]),"3.0"===s&&(f.style.height="1em"),f.setAttribute("accent","false"),f};l({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xleftrightharpoons","\\xrightleftharpoons","\\yields","\\yieldsLeft","\\mesomerism","\\longrightharpoonup","\\longleftharpoondown","\\yieldsLeftRight","\\chemequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:({parser:e,funcName:t},r,n)=>({type:"xArrow",mode:e.mode,name:t,body:r[0],below:n[0]}),mathmlBuilder(e,t){const r=[xe(e.name,e.body,e.below,t)];return r.unshift(be(.2778)),r.push(be(.2778)),new q.MathNode("mrow",r)}});const we={"\\equilibriumRight":["\\longrightharpoonup","\\eqleftharpoondown"],"\\equilibriumLeft":["\\eqrightharpoonup","\\longleftharpoondown"]};l({type:"stackedArrow",names:["\\equilibriumRight","\\equilibriumLeft"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e,funcName:t},r,n){const a=r[0]?{type:"hphantom",mode:e.mode,body:r[0]}:null,o=n[0]?{type:"hphantom",mode:e.mode,body:n[0]}:null;return{type:"stackedArrow",mode:e.mode,name:t,body:r[0],upperArrowBelow:o,lowerArrowBody:a,below:n[0]}},mathmlBuilder(e,t){const r=we[e.name][0],n=we[e.name][1],a=xe(r,e.body,e.upperArrowBelow,t),o=xe(n,e.lowerArrowBody,e.below,t);let s;const i=new q.MathNode("mpadded",[a]);if(i.setAttribute("voffset","0.3em"),i.setAttribute("height","+0.3em"),i.setAttribute("depth","-0.3em"),"\\equilibriumLeft"===e.name){const e=new q.MathNode("mpadded",[o]);e.setAttribute("width","0.5em"),s=new q.MathNode("mpadded",[be(.2778),e,i,be(.2778)])}else i.setAttribute("width","\\equilibriumRight"===e.name?"0.5em":"0"),s=new q.MathNode("mpadded",[be(.2778),i,o,be(.2778)]);return s.setAttribute("voffset","-0.18em"),s.setAttribute("height","-0.18em"),s.setAttribute("depth","+0.18em"),s}});const ve={};function ke({type:e,names:t,props:r,handler:n,mathmlBuilder:a}){const o={type:e,numArgs:r.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:n};for(let e=0;e<t.length;++e)ve[t[e]]=o;a&&(i[e]=a)}function qe(e,t){if(!e||e.type!==t)throw new Error(`Expected node of type ${t}, but got `+(e?`node of type ${e.type}`:String(e)));return e}function _e(e){const t=Ae(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?`node of type ${e.type}`:String(e)));return t}function Ae(e){return e&&("atom"===e.type||Object.prototype.hasOwnProperty.call(B,e.type))?e:null}const Se={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},Ne=()=>({type:"styling",body:[],mode:"math",scriptLevel:"display"}),Te=e=>"textord"===e.type&&"@"===e.text,$e=(e,t)=>("mathord"===e.type||"atom"===e.type)&&e.text===t;function Be(e,t,r){const n=Se[e];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(n,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{const e={type:"atom",text:n,mode:"math",family:"rel"},a={type:"ordgroup",mode:"math",body:[r.callFunction("\\\\cdleft",[t[0]],[]),r.callFunction("\\Big",[e],[]),r.callFunction("\\\\cdright",[t[1]],[])],semisimple:!0};return r.callFunction("\\\\cdparent",[a],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{const e={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[e],[])}default:return{type:"textord",text:" ",mode:"math"}}}l({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"cdlabel",mode:e.mode,side:t.slice(4),label:r[0]}),mathmlBuilder(e,t){if(0===e.label.body.length)return new q.MathNode("mrow",t);const r=ie(e.label,t);"left"===e.side&&r.classes.push("tml-shift-left");const n=new q.MathNode("mtd",[r]);n.style.padding="0";const a=new q.MathNode("mtr",[n]),o=new q.MathNode("mtable",[a]),s=new q.MathNode("mpadded",[o]);return s.setAttribute("width","0.1px"),s.setAttribute("displaystyle","false"),s.setAttribute("scriptlevel","1"),s}}),l({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:({parser:e},t)=>({type:"cdlabelparent",mode:e.mode,fragment:t[0]}),mathmlBuilder:(e,t)=>new q.MathNode("mrow",[ie(e.fragment,t)])});const Me=e=>({type:"ordgroup",mode:"math",body:e,semisimple:!0}),Oe=(e,t)=>({type:t,mode:"math",body:Me(e)});class Ce{constructor(e,t,r){this.lexer=e,this.start=t,this.end=r}static range(e,t){return t?e&&e.loc&&t.loc&&e.loc.lexer===t.loc.lexer?new Ce(e.loc.lexer,e.loc.start,t.loc.end):null:e&&e.loc}}class ze{constructor(e,t){this.text=e,this.loc=t}range(e,t){return new ze(t,Ce.range(this,e))}}const Le=0,De=1,Ie=2,Fe=3,Ge={};function Ee(e,t){Ge[e]=t}Ee("\\noexpand",function(e){const t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}}),Ee("\\expandafter",function(e){const t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}}),Ee("\\@firstoftwo",function(e){return{tokens:e.consumeArgs(2)[0],numArgs:0}}),Ee("\\@secondoftwo",function(e){return{tokens:e.consumeArgs(2)[1],numArgs:0}}),Ee("\\@ifnextchar",function(e){const t=e.consumeArgs(3);e.consumeSpaces();const r=e.future();return 1===t[0].length&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}}),Ee("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),Ee("\\TextOrMath",function(e){const t=e.consumeArgs(2);return"text"===e.mode?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});const Pe=e=>{let t="";for(let r=e.length-1;r>-1;r--)t+=e[r].text;return t},Re={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15},je=e=>{const t=e.future().text;return"EOF"===t?[null,""]:[Re[t.charAt(0)],t]},Ve=(e,t,r)=>{for(let n=1;n<t.length;n++){e*=r,e+=Re[t.charAt(n)]}return e};function Ze(e){const t=e.consumeArgs(1)[0];let r="",n=t[t.length-1].loc.start;for(let e=t.length-1;e>=0;e--){const a=t[e].loc.start;a>n&&(r+=" ",n=a),r+=t[e].text,n+=t[e].text.length}return r}Ee("\\char",function(t){let r,n=t.popToken(),a="";if("'"===n.text)r=8,n=t.popToken();else if('"'===n.text)r=16,n=t.popToken();else if("`"===n.text)if(n=t.popToken(),"\\"===n.text[0])a=n.text.charCodeAt(1);else{if("EOF"===n.text)throw new e("\\char` missing argument");a=n.text.charCodeAt(0)}else r=10;if(r){let o,s=n.text;if(a=Re[s.charAt(0)],null==a||a>=r)throw new e(`Invalid base-${r} digit ${n.text}`);for(a=Ve(a,s,r),[o,s]=je(t);null!=o&&o<r;)a*=r,a+=o,a=Ve(a,s,r),t.popToken(),[o,s]=je(t)}return`\\@char{${a}}`}),Ee("\\surd","\\sqrt{\\vphantom{|}}"),Ee("⊕","\\oplus"),Ee("\\long",""),Ee("\\bgroup","{"),Ee("\\egroup","}"),Ee("~","\\nobreakspace"),Ee("\\lq","`"),Ee("\\rq","'"),Ee("\\aa","\\r a"),Ee("\\Bbbk","\\Bbb{k}"),Ee("\\mathstrut","\\vphantom{(}"),Ee("\\underbar","\\underline{\\text{#1}}"),Ee("\\vdots","{\\varvdots\\rule{0pt}{15pt}}"),Ee("⋮","\\vdots"),Ee("\\arraystretch","1"),Ee("\\arraycolsep","6pt"),Ee("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),Ee("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),Ee("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),Ee("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");const He={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcap":"\\dotsb","\\bigsqcup":"\\dotsb","\\bigtimes":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};Ee("\\dots",function(e){let t="\\dotso";const r=e.expandAfterFuture().text;return r in He?t=He[r]:("\\not"===r.slice(0,4)||r in M.math&&["bin","rel"].includes(M.math[r].group))&&(t="\\dotsb"),t});const Ue={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};Ee("\\dotso",function(e){return e.future().text in Ue?"\\ldots\\,":"\\ldots"}),Ee("\\dotsc",function(e){const t=e.future().text;return t in Ue&&","!==t?"\\ldots\\,":"\\ldots"}),Ee("\\cdots",function(e){return e.future().text in Ue?"\\@cdots\\,":"\\@cdots"}),Ee("\\dotsb","\\cdots"),Ee("\\dotsm","\\cdots"),Ee("\\dotsi","\\!\\cdots"),Ee("\\idotsint","\\dotsi"),Ee("\\dotsx","\\ldots\\,"),Ee("\\DOTSI","\\relax"),Ee("\\DOTSB","\\relax"),Ee("\\DOTSX","\\relax"),Ee("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),Ee("\\,","{\\tmspace+{3mu}{.1667em}}"),Ee("\\thinspace","\\,"),Ee("\\>","\\mskip{4mu}"),Ee("\\:","{\\tmspace+{4mu}{.2222em}}"),Ee("\\medspace","\\:"),Ee("\\;","{\\tmspace+{5mu}{.2777em}}"),Ee("\\thickspace","\\;"),Ee("\\!","{\\tmspace-{3mu}{.1667em}}"),Ee("\\negthinspace","\\!"),Ee("\\negmedspace","{\\tmspace-{4mu}{.2222em}}"),Ee("\\negthickspace","{\\tmspace-{5mu}{.277em}}"),Ee("\\enspace","\\kern.5em "),Ee("\\enskip","\\hskip.5em\\relax"),Ee("\\quad","\\hskip1em\\relax"),Ee("\\qquad","\\hskip2em\\relax"),Ee("\\AA","\\TextOrMath{\\Angstrom}{\\mathring{A}}\\relax"),Ee("\\tag","\\@ifstar\\tag@literal\\tag@paren"),Ee("\\tag@paren","\\tag@literal{({#1})}"),Ee("\\tag@literal",t=>{if(t.macros.get("\\df@tag"))throw new e("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),Ee("\\notag","\\nonumber"),Ee("\\nonumber","\\gdef\\@eqnsw{0}"),Ee("\\bmod","\\mathbin{\\text{mod}}"),Ee("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),Ee("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),Ee("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),Ee("\\newline","\\\\\\relax"),Ee("\\TeX","\\textrm{T}\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125em\\textrm{X}"),Ee("\\LaTeX","\\textrm{L}\\kern-.35em\\raisebox{0.2em}{\\scriptstyle A}\\kern-.15em\\TeX"),Ee("\\Temml","\\textrm{T}\\kern-0.2em\\lower{0.2em}{\\textrm{E}}\\kern-0.08em{\\textrm{M}\\kern-0.08em\\raise{0.2em}\\textrm{M}\\kern-0.08em\\textrm{L}}"),Ee("\\hspace","\\@ifstar\\@hspacer\\@hspace"),Ee("\\@hspace","\\hskip #1\\relax"),Ee("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),Ee("\\colon",'\\mathpunct{\\char"3a}'),Ee("\\prescript","\\pres@cript{_{#1}^{#2}}{}{#3}"),Ee("\\ordinarycolon",'\\char"3a'),Ee("\\vcentcolon","\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}}"),Ee("\\coloneq",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2212}'),Ee("\\Coloneq",'\\mathrel{\\char"2237\\char"2212}'),Ee("\\Eqqcolon",'\\mathrel{\\char"3d\\char"2237}'),Ee("\\Eqcolon",'\\mathrel{\\char"2212\\char"2237}'),Ee("\\colonapprox",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"2248}'),Ee("\\Colonapprox",'\\mathrel{\\char"2237\\char"2248}'),Ee("\\colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}'),Ee("\\Colonsim",'\\mathrel{\\raisebox{0.035em}{\\ordinarycolon}\\char"223c}'),Ee("\\ratio","\\vcentcolon"),Ee("\\coloncolon","\\dblcolon"),Ee("\\colonequals","\\coloneqq"),Ee("\\coloncolonequals","\\Coloneqq"),Ee("\\equalscolon","\\eqqcolon"),Ee("\\equalscoloncolon","\\Eqqcolon"),Ee("\\colonminus","\\coloneq"),Ee("\\coloncolonminus","\\Coloneq"),Ee("\\minuscolon","\\eqcolon"),Ee("\\minuscoloncolon","\\Eqcolon"),Ee("\\coloncolonapprox","\\Colonapprox"),Ee("\\coloncolonsim","\\Colonsim"),Ee("\\notni","\\mathrel{\\char`∌}"),Ee("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),Ee("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),Ee("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),Ee("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),Ee("\\varlimsup","\\DOTSB\\operatorname*{\\overline{\\text{lim}}}"),Ee("\\varliminf","\\DOTSB\\operatorname*{\\underline{\\text{lim}}}"),Ee("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{\\text{lim}}}"),Ee("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{\\text{lim}}}"),Ee("\\centerdot","{\\medspace\\rule{0.167em}{0.189em}\\medspace}"),Ee("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),Ee("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),Ee("\\plim","\\DOTSB\\operatorname*{plim}"),Ee("\\leftmodels","\\mathop{\\reflectbox{$\\models$}}"),Ee("\\bra","\\mathinner{\\langle{#1}|}"),Ee("\\ket","\\mathinner{|{#1}\\rangle}"),Ee("\\braket","\\mathinner{\\langle{#1}\\rangle}"),Ee("\\Bra","\\left\\langle#1\\right|"),Ee("\\Ket","\\left|#1\\right\\rangle");const Xe=(e,t)=>{const r=`}\\,\\middle${"|"===t[0]?"\\vert":"\\Vert"}\\,{`;return e.slice(0,t.index)+r+e.slice(t.index+t[0].length)};Ee("\\Braket",function(e){let t=Ze(e);const r=/\|\||\||\\\|/g;let n;for(;null!==(n=r.exec(t));)t=Xe(t,n);return"\\left\\langle{"+t+"}\\right\\rangle"}),Ee("\\Set",function(e){let t=Ze(e);const r=/\|\||\||\\\|/.exec(t);return r&&(t=Xe(t,r)),"\\left\\{\\:{"+t+"}\\:\\right\\}"}),Ee("\\set",function(e){return"\\{{"+Ze(e).replace(/\|/,"}\\mid{")+"}\\}"}),Ee("\\angln","{\\angl n}"),Ee("\\odv","\\@ifstar\\odv@next\\odv@numerator"),Ee("\\odv@numerator","\\frac{\\mathrm{d}#1}{\\mathrm{d}#2}"),Ee("\\odv@next","\\frac{\\mathrm{d}}{\\mathrm{d}#2}#1"),Ee("\\pdv","\\@ifstar\\pdv@next\\pdv@numerator");const We=e=>{const t=e[0][0].text,r=Pe(e[1]).split(","),n=String(r.length),a="1"===n?"\\partial":`\\partial^${n}`;let o="";return r.map(e=>{o+="\\partial "+e.trim()+"\\,"}),[t,a,o.replace(/\\,$/,"")]};Ee("\\pdv@numerator",function(e){const[t,r,n]=We(e.consumeArgs(2));return`\\frac{${r} ${t}}{${n}}`}),Ee("\\pdv@next",function(e){const[t,r,n]=We(e.consumeArgs(2));return`\\frac{${r}}{${n}} ${t}`}),Ee("\\upalpha","\\up@greek{\\alpha}"),Ee("\\upbeta","\\up@greek{\\beta}"),Ee("\\upgamma","\\up@greek{\\gamma}"),Ee("\\updelta","\\up@greek{\\delta}"),Ee("\\upepsilon","\\up@greek{\\epsilon}"),Ee("\\upzeta","\\up@greek{\\zeta}"),Ee("\\upeta","\\up@greek{\\eta}"),Ee("\\uptheta","\\up@greek{\\theta}"),Ee("\\upiota","\\up@greek{\\iota}"),Ee("\\upkappa","\\up@greek{\\kappa}"),Ee("\\uplambda","\\up@greek{\\lambda}"),Ee("\\upmu","\\up@greek{\\mu}"),Ee("\\upnu","\\up@greek{\\nu}"),Ee("\\upxi","\\up@greek{\\xi}"),Ee("\\upomicron","\\up@greek{\\omicron}"),Ee("\\uppi","\\up@greek{\\pi}"),Ee("\\upalpha","\\up@greek{\\alpha}"),Ee("\\uprho","\\up@greek{\\rho}"),Ee("\\upsigma","\\up@greek{\\sigma}"),Ee("\\uptau","\\up@greek{\\tau}"),Ee("\\upupsilon","\\up@greek{\\upsilon}"),Ee("\\upphi","\\up@greek{\\phi}"),Ee("\\upchi","\\up@greek{\\chi}"),Ee("\\uppsi","\\up@greek{\\psi}"),Ee("\\upomega","\\up@greek{\\omega}"),Ee("\\invamp",'\\mathbin{\\char"214b}'),Ee("\\parr",'\\mathbin{\\char"214b}'),Ee("\\with",'\\mathbin{\\char"26}'),Ee("\\multimapinv",'\\mathrel{\\char"27dc}'),Ee("\\multimapboth",'\\mathrel{\\char"29df}'),Ee("\\scoh",'{\\mkern5mu\\char"2322\\mkern5mu}'),Ee("\\sincoh",'{\\mkern5mu\\char"2323\\mkern5mu}'),Ee("\\coh",'{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2322}}}\n{\\smash{\\lower4mu{\\char"2323}}}\\mkern5mu}'),Ee("\\incoh",'{\\mkern5mu\\rule{}{0.7em}\\mathrlap{\\smash{\\raise2mu{\\char"2323}}}\n{\\smash{\\lower4mu{\\char"2322}}}\\mkern5mu}'),Ee("\\standardstate","\\text{\\tiny\\char`⦵}"),Ee("\\ce",function(e){return Ke(e.consumeArgs(1)[0],"ce")}),Ee("\\pu",function(e){return Ke(e.consumeArgs(1)[0],"pu")}),Ee("\\uniDash","{\\rule{0.672em}{0.06em}}"),Ee("\\triDash","{\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}\\kern2mu\\rule{0.15em}{0.06em}}"),Ee("\\tripleDash","\\kern0.075em\\raise0.25em{\\triDash}\\kern0.075em"),Ee("\\tripleDashOverLine","\\kern0.075em\\mathrlap{\\raise0.125em{\\uniDash}}\\raise0.34em{\\triDash}\\kern0.075em"),Ee("\\tripleDashOverDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\triDash}}\\raise0.27em{\\uniDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em"),Ee("\\tripleDashBetweenDoubleLine","\\kern0.075em\\mathrlap{\\mathrlap{\\raise0.48em{\\uniDash}}\\raise0.27em{\\triDash}}{\\raise0.05em{\\uniDash}}\\kern0.075em");var Ke=function(e,t){for(var r="",n=e.length&&e[e.length-1].loc.start,a=e.length-1;a>=0;a--)e[a].loc.start>n&&(r+=" ",n=e[a].loc.start),r+=e[a].text,n+=e[a].text.length;return Qe.go(Je.go(r,t))},Je={go:function(e,t){if(!e)return[];void 0===t&&(t="ce");var r,n="0",a={};a.parenthesisLevel=0,e=(e=(e=e.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var o=10,s=[];;){r!==e?(o=10,r=e):o--;var i=Je.stateMachines[t],l=i.transitions[n]||i.transitions["*"];e:for(var c=0;c<l.length;c++){var u=Je.patterns.match_(l[c].pattern,e);if(u){for(var p=l[c].task,m=0;m<p.action_.length;m++){var d;if(i.actions[p.action_[m].type_])d=i.actions[p.action_[m].type_](a,u.match_,p.action_[m].option);else{if(!Je.actions[p.action_[m].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+p.action_[m].type_+")"];d=Je.actions[p.action_[m].type_](a,u.match_,p.action_[m].option)}Je.concatArray(s,d)}if(n=p.nextState||n,!(e.length>0))return s;if(p.revisit||(e=u.remainder),!p.toContinue)break e}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t)if(Array.isArray(t))for(var r=0;r<t.length;r++)e.push(t[r]);else e.push(t)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=Je.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var r=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return r?{match_:r[0],remainder:e.substr(r[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return Je.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return Je.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return Je.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return Je.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return Je.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return Je.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return Je.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return Je.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return Je.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return Je.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return Je.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return Je.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return Je.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return Je.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return Je.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return Je.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return Je.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return Je.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return Je.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return Je.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var t;if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:t[0],remainder:e.substr(t[0].length)};var r=Je.patterns.findObserveGroups(e,"","$","$","");return r&&(t=r.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,r,n,a,o,s,i,l,c){var u=function(e,t){if("string"==typeof t)return 0!==e.indexOf(t)?null:t;var r=e.match(t);return r?r[0]:null},p=u(e,t);if(null===p)return null;if(e=e.substr(p.length),null===(p=u(e,r)))return null;var m=function(e,t,r){for(var n=0;t<e.length;){var a=e.charAt(t),o=u(e.substr(t),r);if(null!==o&&0===n)return{endMatchBegin:t,endMatchEnd:t+o.length};if("{"===a)n++;else if("}"===a){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}t++}return null}(e,p.length,n||a);if(null===m)return null;var d=e.substring(0,n?m.endMatchEnd:m.endMatchBegin);if(o||s){var h=this.findObserveGroups(e.substr(m.endMatchEnd),o,s,i,l);if(null===h)return null;var g=[d,h.match_];return{match_:c?g.join(""):g,remainder:h.remainder}}return{match_:d,remainder:e.substr(m.endMatchEnd)}},match_:function(e,t){var r=Je.patterns.patterns[e];if(void 0===r)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if("function"==typeof r)return Je.patterns.patterns[e](t);var n=t.match(r);return n?{match_:n[2]?[n[1],n[2]]:n[1]?n[1]:n[0],remainder:t.substr(n[0].length)}:null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,r){return{type_:r}},"insert+p1":function(e,t,r){return{type_:r,p1:t}},"insert+p1+p2":function(e,t,r){return{type_:r,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return Je.go(t,"text")},"{text}":function(e,t){var r=["{"];return Je.concatArray(r,Je.go(t,"text")),r.push("}"),r},"tex-math":function(e,t){return Je.go(t,"tex-math")},"tex-math tight":function(e,t){return Je.go(t,"tex-math tight")},bond:function(e,t,r){return{type_:"bond",kind_:r||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return Je.go(t)},"1/2":function(e,t){var r=[];t.match(/^[+\-]/)&&(r.push(t.substr(0,1)),t=t.substr(1));var n=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),r.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),r.push({type_:"tex-math",p1:n[3]})),r},"9,9":function(e,t){return Je.go(t,"9,9")}},createTransitions:function(e){var t,r,n,a,o={};for(t in e)for(r in e[t])for(n=r.split("|"),e[t][r].stateArray=n,a=0;a<n.length;a++)o[n[a]]=[];for(t in e)for(r in e[t])for(n=e[t][r].stateArray||[],a=0;a<n.length;a++){var s=e[t][r];if(s.action_){s.action_=[].concat(s.action_);for(var i=0;i<s.action_.length;i++)"string"==typeof s.action_[i]&&(s.action_[i]={type_:s.action_[i]})}else s.action_=[];for(var l=t.split("|"),c=0;c<l.length;c++)if("*"===n[a])for(var u in o)o[u].push({pattern:l[c],task:s});else o[n[a]].push({pattern:l[c],task:s})}return o},stateMachines:{}};Je.stateMachines={ce:{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var r;if((e.d||"").match(/^[0-9]+$/)){var n=e.d;e.d=void 0,r=this.output(e),e.b=n}else r=this.output(e);return Je.actions["o="](e,t),r},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var r=[];return Je.concatArray(r,this.output(e)),Je.concatArray(r,Je.actions.bond(e,t,"-")),r}e.d=t},"- after o/d":function(e,t,r){var n=Je.patterns.match_("orbital",e.o||""),a=Je.patterns.match_("one lowercase greek letter $",e.o||""),o=Je.patterns.match_("one lowercase latin letter $",e.o||""),s=Je.patterns.match_("$one lowercase latin letter$ $",e.o||""),i="-"===t&&(n&&""===n.remainder||a||o||s);!i||e.a||e.b||e.p||e.d||e.q||n||!o||(e.o="$"+e.o+"$");var l=[];return i?(Je.concatArray(l,this.output(e)),l.push({type_:"hyphen"})):(n=Je.patterns.match_("digits",e.d||""),r&&n&&""===n.remainder?(Je.concatArray(l,Je.actions["d="](e,t)),Je.concatArray(l,this.output(e))):(Je.concatArray(l,this.output(e)),Je.concatArray(l,Je.actions.bond(e,t,"-")))),l},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:Je.go(t,"o")}},comma:function(e,t){var r=t.replace(/\s*$/,"");return r!==t&&0===e.parenthesisLevel?{type_:"comma enumeration L",p1:r}:{type_:"comma enumeration M",p1:r}},output:function(e,t,r){var n,a,o;e.r?(a="M"===e.rdt?Je.go(e.rd,"tex-math"):"T"===e.rdt?[{type_:"text",p1:e.rd||""}]:Je.go(e.rd),o="M"===e.rqt?Je.go(e.rq,"tex-math"):"T"===e.rqt?[{type_:"text",p1:e.rq||""}]:Je.go(e.rq),n={type_:"arrow",r:e.r,rd:a,rq:o}):(n=[],(e.a||e.b||e.p||e.o||e.q||e.d||r)&&(e.sb&&n.push({type_:"entitySkip"}),e.o||e.q||e.d||e.b||e.p||2===r?e.o||e.q||e.d||!e.b&&!e.p?e.o&&"kv"===e.dType&&Je.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&"kv"===e.dType&&!e.q&&(e.dType=void 0):(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):(e.o=e.a,e.a=void 0),n.push({type_:"chemfive",a:Je.go(e.a,"a"),b:Je.go(e.b,"bd"),p:Je.go(e.p,"pq"),o:Je.go(e.o,"o"),q:Je.go(e.q,"pq"),d:Je.go(e.d,"oxidation"===e.dType?"oxidation":"bd"),dType:e.dType})));for(var s in e)"parenthesisLevel"!==s&&"beginsWithBond"!==s&&delete e[s];return n},"oxidation-output":function(e,t){var r=["{"];return Je.concatArray(r,Je.go(t,"oxidation")),r.push("}"),r},"frac-output":function(e,t){return{type_:"frac-ce",p1:Je.go(t[0]),p2:Je.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:Je.go(t[0]),p2:Je.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:Je.go(t[0]),p2:Je.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:Je.go(t[0]),p2:Je.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Je.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,r){return{type_:"operator",kind_:r||t}}}},a:{transitions:Je.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Je.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var r in e)delete e[r];return t}}}},pq:{transitions:Je.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:Je.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Je.go(t[1],"pq")}}}},bd:{transitions:Je.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Je.go(t[1],"bd")}}}},oxidation:{transitions:Je.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"tex-math tight":{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var r in e)delete e[r];return t}}}},"9,9":{transitions:Je.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var r=[];return"+-"===t[0]||"+/-"===t[0]?r.push("\\pm "):t[0]&&r.push(t[0]),t[1]&&(Je.concatArray(r,Je.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?Je.concatArray(r,Je.go(t[2],"pu-9,9")):r.push(t[2])),t[3]=t[4]||t[3],t[3]&&(t[3]=t[3].trim(),"e"===t[3]||"*"===t[3].substr(0,1)?r.push({type_:"cdot"}):r.push({type_:"times"}))),t[3]&&r.push("10^{"+t[5]+"}"),r},"number^":function(e,t){var r=[];return"+-"===t[0]||"+/-"===t[0]?r.push("\\pm "):t[0]&&r.push(t[0]),Je.concatArray(r,Je.go(t[1],"pu-9,9")),r.push("^{"+t[2]+"}"),r},operator:function(e,t,r){return{type_:"operator",kind_:r||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,r=Je.patterns.match_("{(...)}",e.d||"");r&&""===r.remainder&&(e.d=r.match_);var n=Je.patterns.match_("{(...)}",e.q||"");if(n&&""===n.remainder&&(e.q=n.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:Je.go(e.d,"pu"),q:Je.go(e.q,"pu")};"//"===e.o?t={type_:"pu-frac",p1:a.d,p2:a.q}:(t=a.d,a.d.length>1||a.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),Je.concatArray(t,a.q))}else t=Je.go(e.d,"pu-2");for(var o in e)delete e[o];return t}}},"pu-2":{transitions:Je.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var r=Je.patterns.match_("{(...)}",e.rm||"");t=r&&""===r.remainder?Je.go(r.match_,"pu"):{type_:"rm",p1:e.rm}}for(var n in e)delete e[n];return t}}},"pu-9,9":{transitions:Je.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var r=e.text_.length%3;0===r&&(r=3);for(var n=e.text_.length-3;n>0;n-=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,r)),t.reverse()}else t.push(e.text_);for(var a in e)delete e[a];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var r=e.text_.length-3,n=0;n<r;n+=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(n))}else t.push(e.text_);for(var a in e)delete e[a];return t}}}};var Qe={go:function(e,t){if(!e)return"";for(var r="",n=!1,a=0;a<e.length;a++){var o=e[a];"string"==typeof o?r+=o:(r+=Qe._go2(o),"1st-level escape"===o.type_&&(n=!0))}return t||n||!r||(r="{"+r+"}"),r},_goInner:function(e){return e?Qe.go(e,!0):e},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var r={a:Qe._goInner(e.a),b:Qe._goInner(e.b),p:Qe._goInner(e.p),o:Qe._goInner(e.o),q:Qe._goInner(e.q),d:Qe._goInner(e.d)};r.a&&(r.a.match(/^[+\-]/)&&(r.a="{"+r.a+"}"),t+=r.a+"\\,"),(r.b||r.p)&&(t+="{\\vphantom{X}}",t+="^{\\hphantom{"+(r.b||"")+"}}_{\\hphantom{"+(r.p||"")+"}}",t+="{\\vphantom{X}}",t+="^{\\vphantom{2}\\mathllap{"+(r.b||"")+"}}",t+="_{\\vphantom{2}\\mathllap{"+(r.p||"")+"}}"),r.o&&(r.o.match(/^[+\-]/)&&(r.o="{"+r.o+"}"),t+=r.o),"kv"===e.dType?((r.d||r.q)&&(t+="{\\vphantom{X}}"),r.d&&(t+="^{"+r.d+"}"),r.q&&(t+="_{"+r.q+"}")):"oxidation"===e.dType?(r.d&&(t+="{\\vphantom{X}}",t+="^{"+r.d+"}"),r.q&&(t+="{{}}",t+="_{"+r.q+"}")):(r.q&&(t+="{{}}",t+="_{"+r.q+"}"),r.d&&(t+="{{}}",t+="^{"+r.d+"}"));break;case"rm":case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+Qe._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+Qe._goInner(e.p1);break;case"bond":if(!(t=Qe._getBond(e.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var n="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var a="\\frac{"+Qe._goInner(e.p1)+"}{"+Qe._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+Qe._goInner(e.p1)+"}{"+Qe._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+Qe._goInner(e.p1)+"}{"+Qe._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+Qe._goInner(e.p1)+"}{"+Qe._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+Qe._goInner(e.p1)+"}_{"+Qe._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+Qe._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var o={rd:Qe._goInner(e.rd),rq:Qe._goInner(e.rq)},s=Qe._getArrow(e.r);o.rq&&(s+="[{\\rm "+o.rq+"}]"),t=s+=o.rd?"{\\rm "+o.rd+"}":"{}";break;case"operator":t=Qe._getOperator(e.kind_);break;case"space":t=" ";break;case"entitySkip":case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\text{\\textbullet}\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":case"→":case"⟶":return"\\yields";case"<-":return"\\yieldsLeft";case"<->":return"\\mesomerism";case"<--\x3e":return"\\yieldsLeftRight";case"<=>":case"⇌":return"\\chemequilibrium";case"<=>>":return"\\equilibriumRight";case"<<=>":return"\\equilibriumLeft";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripleDash}";case"~-":return"{\\tripleDashOverLine}";case"~=":case"~--":return"{\\tripleDashOverDoubleLine}";case"-~-":return"{\\tripleDashBetweenDoubleLine}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};function Ye(e){const t=[];e.consumeSpaces();let r=e.fetch().text;for("\\relax"===r&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);"\\hline"===r||"\\hdashline"===r;)e.consume(),t.push("\\hdashline"===r),e.consumeSpaces(),r=e.fetch().text;return t}Ee("\\darr","\\downarrow"),Ee("\\dArr","\\Downarrow"),Ee("\\Darr","\\Downarrow"),Ee("\\lang","\\langle"),Ee("\\rang","\\rangle"),Ee("\\uarr","\\uparrow"),Ee("\\uArr","\\Uparrow"),Ee("\\Uarr","\\Uparrow"),Ee("\\N","\\mathbb{N}"),Ee("\\R","\\mathbb{R}"),Ee("\\Z","\\mathbb{Z}"),Ee("\\alef","\\aleph"),Ee("\\alefsym","\\aleph"),Ee("\\bull","\\bullet"),Ee("\\clubs","\\clubsuit"),Ee("\\cnums","\\mathbb{C}"),Ee("\\Complex","\\mathbb{C}"),Ee("\\Dagger","\\ddagger"),Ee("\\diamonds","\\diamondsuit"),Ee("\\empty","\\emptyset"),Ee("\\exist","\\exists"),Ee("\\harr","\\leftrightarrow"),Ee("\\hArr","\\Leftrightarrow"),Ee("\\Harr","\\Leftrightarrow"),Ee("\\hearts","\\heartsuit"),Ee("\\image","\\Im"),Ee("\\infin","\\infty"),Ee("\\isin","\\in"),Ee("\\larr","\\leftarrow"),Ee("\\lArr","\\Leftarrow"),Ee("\\Larr","\\Leftarrow"),Ee("\\lrarr","\\leftrightarrow"),Ee("\\lrArr","\\Leftrightarrow"),Ee("\\Lrarr","\\Leftrightarrow"),Ee("\\natnums","\\mathbb{N}"),Ee("\\plusmn","\\pm"),Ee("\\rarr","\\rightarrow"),Ee("\\rArr","\\Rightarrow"),Ee("\\Rarr","\\Rightarrow"),Ee("\\real","\\Re"),Ee("\\reals","\\mathbb{R}"),Ee("\\Reals","\\mathbb{R}"),Ee("\\sdot","\\cdot"),Ee("\\sect","\\S"),Ee("\\spades","\\spadesuit"),Ee("\\sub","\\subset"),Ee("\\sube","\\subseteq"),Ee("\\supe","\\supseteq"),Ee("\\thetasym","\\vartheta"),Ee("\\weierp","\\wp"),Ee("\\quantity","{\\left\\{ #1 \\right\\}}"),Ee("\\qty","{\\left\\{ #1 \\right\\}}"),Ee("\\pqty","{\\left( #1 \\right)}"),Ee("\\bqty","{\\left[ #1 \\right]}"),Ee("\\vqty","{\\left\\vert #1 \\right\\vert}"),Ee("\\Bqty","{\\left\\{ #1 \\right\\}}"),Ee("\\absolutevalue","{\\left\\vert #1 \\right\\vert}"),Ee("\\abs","{\\left\\vert #1 \\right\\vert}"),Ee("\\norm","{\\left\\Vert #1 \\right\\Vert}"),Ee("\\evaluated","{\\left.#1 \\right\\vert}"),Ee("\\eval","{\\left.#1 \\right\\vert}"),Ee("\\order","{\\mathcal{O} \\left( #1 \\right)}"),Ee("\\commutator","{\\left[ #1 , #2 \\right]}"),Ee("\\comm","{\\left[ #1 , #2 \\right]}"),Ee("\\anticommutator","{\\left\\{ #1 , #2 \\right\\}}"),Ee("\\acomm","{\\left\\{ #1 , #2 \\right\\}}"),Ee("\\poissonbracket","{\\left\\{ #1 , #2 \\right\\}}"),Ee("\\pb","{\\left\\{ #1 , #2 \\right\\}}"),Ee("\\vectorbold","{\\boldsymbol{ #1 }}"),Ee("\\vb","{\\boldsymbol{ #1 }}"),Ee("\\vectorarrow","{\\vec{\\boldsymbol{ #1 }}}"),Ee("\\va","{\\vec{\\boldsymbol{ #1 }}}"),Ee("\\vectorunit","{{\\boldsymbol{\\hat{ #1 }}}}"),Ee("\\vu","{{\\boldsymbol{\\hat{ #1 }}}}"),Ee("\\dotproduct","\\mathbin{\\boldsymbol\\cdot}"),Ee("\\vdot","{\\boldsymbol\\cdot}"),Ee("\\crossproduct","\\mathbin{\\boldsymbol\\times}"),Ee("\\cross","\\mathbin{\\boldsymbol\\times}"),Ee("\\cp","\\mathbin{\\boldsymbol\\times}"),Ee("\\gradient","{\\boldsymbol\\nabla}"),Ee("\\grad","{\\boldsymbol\\nabla}"),Ee("\\divergence","{\\grad\\vdot}"),Ee("\\curl","{\\grad\\cross}"),Ee("\\laplacian","\\nabla^2"),Ee("\\tr","{\\operatorname{tr}}"),Ee("\\Tr","{\\operatorname{Tr}}"),Ee("\\rank","{\\operatorname{rank}}"),Ee("\\erf","{\\operatorname{erf}}"),Ee("\\Res","{\\operatorname{Res}}"),Ee("\\principalvalue","{\\mathcal{P}}"),Ee("\\pv","{\\mathcal{P}}"),Ee("\\PV","{\\operatorname{P.V.}}"),Ee("\\qqtext","{\\quad\\text{ #1 }\\quad}"),Ee("\\qq","{\\quad\\text{ #1 }\\quad}"),Ee("\\qcomma","{\\text{,}\\quad}"),Ee("\\qc","{\\text{,}\\quad}"),Ee("\\qcc","{\\quad\\text{c.c.}\\quad}"),Ee("\\qif","{\\quad\\text{if}\\quad}"),Ee("\\qthen","{\\quad\\text{then}\\quad}"),Ee("\\qelse","{\\quad\\text{else}\\quad}"),Ee("\\qotherwise","{\\quad\\text{otherwise}\\quad}"),Ee("\\qunless","{\\quad\\text{unless}\\quad}"),Ee("\\qgiven","{\\quad\\text{given}\\quad}"),Ee("\\qusing","{\\quad\\text{using}\\quad}"),Ee("\\qassume","{\\quad\\text{assume}\\quad}"),Ee("\\qsince","{\\quad\\text{since}\\quad}"),Ee("\\qlet","{\\quad\\text{let}\\quad}"),Ee("\\qfor","{\\quad\\text{for}\\quad}"),Ee("\\qall","{\\quad\\text{all}\\quad}"),Ee("\\qeven","{\\quad\\text{even}\\quad}"),Ee("\\qodd","{\\quad\\text{odd}\\quad}"),Ee("\\qinteger","{\\quad\\text{integer}\\quad}"),Ee("\\qand","{\\quad\\text{and}\\quad}"),Ee("\\qor","{\\quad\\text{or}\\quad}"),Ee("\\qas","{\\quad\\text{as}\\quad}"),Ee("\\qin","{\\quad\\text{in}\\quad}"),Ee("\\differential","{\\text{d}}"),Ee("\\dd","{\\text{d}}"),Ee("\\derivative","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}"),Ee("\\dv","{\\frac{\\text{d}{ #1 }}{\\text{d}{ #2 }}}"),Ee("\\partialderivative","{\\frac{\\partial{ #1 }}{\\partial{ #2 }}}"),Ee("\\variation","{\\delta}"),Ee("\\var","{\\delta}"),Ee("\\functionalderivative","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}"),Ee("\\fdv","{\\frac{\\delta{ #1 }}{\\delta{ #2 }}}"),Ee("\\innerproduct","{\\left\\langle {#1} \\mid { #2} \\right\\rangle}"),Ee("\\outerproduct","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}"),Ee("\\dyad","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}"),Ee("\\ketbra","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}"),Ee("\\op","{\\left\\vert { #1 } \\right\\rangle\\left\\langle { #2} \\right\\vert}"),Ee("\\expectationvalue","{\\left\\langle {#1 } \\right\\rangle}"),Ee("\\expval","{\\left\\langle {#1 } \\right\\rangle}"),Ee("\\ev","{\\left\\langle {#1 } \\right\\rangle}"),Ee("\\matrixelement","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}"),Ee("\\matrixel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}"),Ee("\\mel","{\\left\\langle{ #1 }\\right\\vert{ #2 }\\left\\vert{#3}\\right\\rangle}");const et=t=>{if(!t.parser.settings.displayMode)throw new e(`{${t.envName}} can be used only in display mode.`)},tt=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/,rt=e=>{let t=e.get("\\arraystretch");"string"!=typeof t&&(t=Pe(t.tokens)),t=isNaN(t)?null:Number(t);let r=e.get("\\arraycolsep");"string"!=typeof r&&(r=Pe(r.tokens));const n=tt.exec(r);return[t,n?{number:+(n[1]+n[2]),unit:n[3]}:null]},nt=t=>{let r="";for(let n=0;n<t.length;n++)if("label"===t[n].type){if(r)throw new e("Multiple \\labels in one row");r=t[n].string}return r};function at(e){if(-1===e.indexOf("ed"))return-1===e.indexOf("*")}function ot(t,{cols:r,envClasses:n,autoTag:a,singleRow:o,emptySingleRow:s,maxNumCols:i,leqno:l,arraystretch:c,arraycolsep:u},p){const m=n&&n.includes("bordermatrix")?"}":"\\end";t.gullet.beginGroup(),o||t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();let d=[];const h=[d],g=[],b=[],f=[],y=null!=a?[]:void 0;function x(){a&&t.gullet.macros.set("\\@eqnsw","1",!0)}function w(){y&&(t.gullet.macros.get("\\df@tag")?(y.push(t.subparse([new ze("\\df@tag")])),t.gullet.macros.set("\\df@tag",void 0,!0)):y.push(Boolean(a)&&"1"===t.gullet.macros.get("\\@eqnsw")))}for(x(),f.push(Ye(t));;){let r=t.parseExpression(!1,o?"\\end":"\\\\");t.gullet.endGroup(),t.gullet.beginGroup(),r={type:"ordgroup",mode:t.mode,body:r,semisimple:!0},d.push(r);const a=t.fetch().text;if("&"===a){if(i&&d.length===i){if(!n.includes("array"))throw new e(2===i?"The split environment accepts no more than two columns":"The equation environment accepts only one column",t.nextToken);if(t.settings.strict)throw new e("Too few columns specified in the {array} column argument.",t.nextToken)}t.consume()}else{if(a===m){w(),1===d.length&&0===r.body.length&&(h.length>1||!s)&&h.pop(),b.push(nt(r.body)),f.length<h.length+1&&f.push([]);break}if("\\\\"!==a)throw new e("Expected & or \\\\ or \\cr or "+m,t.nextToken);{let e;t.consume()," "!==t.gullet.future().text&&(e=t.parseSizeGroup(!0)),g.push(e?e.value:null),w(),b.push(nt(r.body)),f.push(Ye(t)),d=[],h.push(d),x()}}}return t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:t.mode,body:h,cols:r,rowGaps:g,hLinesBeforeRow:f,envClasses:n,autoTag:a,scriptLevel:p,tags:y,labels:b,leqno:l,arraystretch:c,arraycolsep:u}}function st(e){return"d"===e.slice(0,1)?"display":"text"}const it={c:"center ",l:"left ",r:"right "},lt=e=>{const t=new q.MathNode("mtd",[]);return t.style={padding:"0",width:"50%"},e.envClasses.includes("multline")&&(t.style.width="7.5%"),t},ct=function(e,t){const r=[],n=e.body.length,a=e.hLinesBeforeRow;for(let o=0;o<n;o++){const s=e.body[o],i=[],l="text"===e.scriptLevel?De:"script"===e.scriptLevel?Ie:Le;for(let r=0;r<s.length;r++){const a=new q.MathNode("mtd",[ie(s[r],t.withLevel(l))]);if(e.envClasses.includes("multline")){const e=0===o?"left":o===n-1?"right":"center";"center"!==e&&a.classes.push("tml-"+e)}i.push(a)}const c=e.body[0].length;for(let e=0;e<c-s.length;e++)i.push(new q.MathNode("mtd",[],[],t));if(e.autoTag){const r=e.tags[o];let n;!0===r?n=new q.MathNode("mtext",[new f(["tml-eqn"])]):!1===r?n=new q.MathNode("mtext",[],[]):(n=se(r[0].body,t.withLevel(l),!0),n=ee(n),n.classes=["tml-tag"]),n&&(i.unshift(lt(e)),i.push(lt(e)),e.leqno?i[0].children.push(n):i[i.length-1].children.push(n))}const u=new q.MathNode("mtr",i,[]),p=e.labels.shift();p&&e.tags&&e.tags[o]&&(u.setAttribute("id",p),Array.isArray(e.tags[o])&&u.classes.push("tml-tageqn")),0===o&&a[0].length>0&&(2===a[0].length?u.children.forEach(e=>{e.style.borderTop="0.15em double"}):u.children.forEach(e=>{e.style.borderTop=a[0][0]?"0.06em dashed":"0.06em solid"})),a[o+1].length>0&&(2===a[o+1].length?u.children.forEach(e=>{e.style.borderBottom="0.15em double"}):u.children.forEach(e=>{e.style.borderBottom=a[o+1][0]?"0.06em dashed":"0.06em solid"}));let m=!0;for(let e=0;e<u.children.length;e++){const t=u.children[e].children[0];if(!t||"mpadded"!==t.type||"0px"!==t.attributes.height){m=!1;break}}if(m)for(let e=0;e<u.children.length;e++)u.children[e].style.display="block",u.children[e].style.height="0",u.children[e].style.paddingTop="0",u.children[e].style.paddingBottom="0";r.push(u)}if(e.arraystretch&&1!==e.arraystretch){const t=String(1.4*e.arraystretch-.8)+"ex";for(let e=0;e<r.length;e++)for(let n=0;n<r[e].children.length;n++)r[e].children[n].style.paddingTop=t,r[e].children[n].style.paddingBottom=t}let o,s;if(e.envClasses.length>0&&(o=e.envClasses.includes("abut")||e.envClasses.includes("cases")?"0":e.envClasses.includes("small")?"0.1389":e.envClasses.includes("cd")?"0.25":"0.4",s="em"),e.arraycolsep){const r=ge(e.arraycolsep,t);o=r.number.toFixed(4),s=r.unit}if(o){const t=0===r.length?0:r[0].children.length,n=(r,n)=>0===r&&0===n||r===t-1&&1===n?"0":"align"!==e.envClasses[0]?o:1===n?"0":e.autoTag?r%2?"1":"0":r%2?"0":"1";for(let e=0;e<r.length;e++)for(let t=0;t<r[e].children.length;t++)r[e].children[t].style.paddingLeft=`${n(t,0)}${s}`,r[e].children[t].style.paddingRight=`${n(t,1)}${s}`}if(0===e.envClasses.length)for(let e=0;e<r.length;e++)r[e].children[0].style.paddingLeft="0em",r[e].children.length===r[0].children.length&&(r[e].children[r[e].children.length-1].style.paddingRight="0em");if(e.envClasses.length>0){const t=e.envClasses.includes("align")||e.envClasses.includes("alignat");for(let n=0;n<r.length;n++){const a=r[n];if(t){for(let e=0;e<a.children.length;e++)a.children[e].classes=["tml-"+(e%2?"left":"right")];if(e.autoTag){const t=e.leqno?0:a.children.length-1;a.children[t].classes=[]}}if(a.children.length>1&&e.envClasses.includes("cases")&&(a.children[1].style.paddingLeft="1em"),e.envClasses.includes("cases")||e.envClasses.includes("subarray"))for(const e of a.children)e.classes.push("tml-left")}}let i=new q.MathNode("mtable",r);if(e.envClasses.length>0&&(e.envClasses.includes("jot")?i.classes.push("tml-jot"):e.envClasses.includes("small")&&i.classes.push("tml-small")),"display"===e.scriptLevel&&i.setAttribute("displaystyle","true"),(e.autoTag||e.envClasses.includes("multline"))&&(i.style.width="100%"),e.cols&&e.cols.length>0){const t=e.cols;let r=!1,n=0,a=t.length;for(;"separator"===t[n].type;)n+=1;for(;"separator"===t[a-1].type;)a-=1;if("separator"===t[0].type){const e="separator"===t[1].type?"0.15em double":"|"===t[0].separator?"0.06em solid ":"0.06em dashed ";for(const t of i.children)t.children[0].style.borderLeft=e}let o=e.autoTag?0:-1;for(let e=n;e<a;e++)if("align"===t[e].type){const n=it[t[e].align];o+=1;for(const e of i.children)"center"!==n.trim()&&o<e.children.length&&(e.children[o].classes=["tml-"+n.trim()]);r=!0}else if("separator"===t[e].type){if(r){const r="separator"===t[e+1].type?"0.15em double":"|"===t[e].separator?"0.06em solid":"0.06em dashed";for(const e of i.children)o<e.children.length&&(e.children[o].style.borderRight=r)}r=!1}if("separator"===t[t.length-1].type){const e="separator"===t[t.length-2].type?"0.15em double":"|"===t[t.length-1].separator?"0.06em solid":"0.06em dashed";for(const t of i.children)t.children[t.children.length-1].style.borderRight=e,t.children[t.children.length-1].style.paddingRight="0.4em"}}return e.envClasses.includes("small")&&(i=new q.MathNode("mstyle",[i]),i.setAttribute("scriptlevel","1")),i},ut=function(t,r){-1===t.envName.indexOf("ed")&&et(t);const n="split"===t.envName,a=[],o=ot(t.parser,{cols:a,emptySingleRow:!0,autoTag:n?void 0:at(t.envName),envClasses:["abut","jot"],maxNumCols:"split"===t.envName?2:void 0,leqno:t.parser.settings.leqno},"display");let s,i=0;const l=t.envName.indexOf("at")>-1;if(r[0]&&l){let t="";for(let e=0;e<r[0].body.length;e++){t+=qe(r[0].body[e],"textord").text}if(isNaN(t))throw new e("The alignat enviroment requires a numeric first argument.");s=Number(t),i=2*s}o.body.forEach(function(t){if(l){const r=t.length/2;if(s<r)throw new e(`Too many math in a row: expected ${s}, but got ${r}`,t[0])}else i<t.length&&(i=t.length)});for(let e=0;e<i;++e){let t="r";e%2==1&&(t="l"),a[e]={type:"align",align:t}}return"split"===t.envName||(l?o.envClasses.push("alignat"):o.envClasses[0]="align"),o};ke({type:"array",names:["array","darray"],props:{numArgs:1},handler(t,r){const n=(Ae(r[0])?[r[0]]:qe(r[0],"ordgroup").body).map(function(t){const r=_e(t).text;if(-1!=="lcr".indexOf(r))return{type:"align",align:r};if("|"===r)return{type:"separator",separator:"|"};if(":"===r)return{type:"separator",separator:":"};throw new e("Unknown column alignment: "+r,t)}),[a,o]=rt(t.parser.gullet.macros),s={cols:n,envClasses:["array"],maxNumCols:n.length,arraystretch:a,arraycolsep:o};return ot(t.parser,s,st(t.envName))},mathmlBuilder:ct}),ke({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(t){const r={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[t.envName.replace("*","")];let n="c";const a={envClasses:[],cols:[]};if("*"===t.envName.charAt(t.envName.length-1)){const r=t.parser;if(r.consumeSpaces(),"["===r.fetch().text){if(r.consume(),r.consumeSpaces(),n=r.fetch().text,-1==="lcr".indexOf(n))throw new e("Expected l or c or r",r.nextToken);r.consume(),r.consumeSpaces(),r.expect("]"),r.consume(),a.cols=[]}}const o=ot(t.parser,a,"text");o.cols=o.body.length>0?new Array(o.body[0].length).fill({type:"align",align:n}):[];const[s,i]=rt(t.parser.gullet.macros);return o.arraystretch=s,!i||6===i&&"pt"===i||(o.arraycolsep=i),r?{type:"leftright",mode:t.mode,body:[o],left:r[0],right:r[1],rightColor:void 0}:o},mathmlBuilder:ct}),ke({type:"array",names:["bordermatrix"],props:{numArgs:0},handler(e){const t=ot(e.parser,{cols:[],envClasses:["bordermatrix"]},"text");return t.cols=t.body.length>0?new Array(t.body[0].length).fill({type:"align",align:"c"}):[],t.envClasses=[],t.arraystretch=1,"matrix"===e.envName?t:((e,t)=>{const r=e.body;r[0].shift();const n=new Array(r.length-1).fill().map(()=>[]);for(let e=1;e<r.length;e++){n[e-1].push(r[e].shift());const t=[];for(let n=0;n<r[e].length;n++)t.push(r[e][n]);n[e-1].push(Oe(t,"vphantom"))}const a=new Array(r.length).fill().map(()=>[]);for(let e=0;e<r[0].length;e++)a[0].push(r[0][e]);for(let e=1;e<r.length;e++)for(let t=0;t<r[0].length;t++)a[e].push(Oe(r[e][t].body,"hphantom"));for(let e=0;e<r[0].length;e++)r[0][e]=Oe(r[0][e].body,"hphantom");const o={type:"array",mode:"math",body:n,cols:[{type:"align",align:"c"}],rowGaps:new Array(n.length-1).fill(null),hLinesBeforeRow:new Array(n.length+1).fill().map(()=>[]),envClasses:[],scriptLevel:"text",arraystretch:1,labels:new Array(n.length).fill(""),arraycolsep:{number:.04,unit:"em"}},s={type:"styling",mode:"math",scriptLevel:"text",body:[{type:"array",mode:"math",body:a,cols:new Array(a.length).fill({type:"align",align:"c"}),rowGaps:new Array(a.length-1).fill(null),hLinesBeforeRow:new Array(a.length+1).fill().map(()=>[]),envClasses:[],scriptLevel:"text",arraystretch:1,labels:new Array(a.length).fill(""),arraycolsep:null}]},i={type:"leftright",mode:"math",body:[e],left:t?t[0]:"(",right:t?t[1]:")",rightColor:void 0};return Me([o,{type:"supsub",mode:"math",stack:!0,base:{type:"op",mode:"math",limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!0,symbol:!1,suppressBaseShift:!0,body:[i]},sup:s,sub:null}])})(t,e.delimiters)},mathmlBuilder:ct}),ke({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){const t=ot(e.parser,{},"script");return t.envClasses=["small"],t},mathmlBuilder:ct}),ke({type:"array",names:["subarray"],props:{numArgs:1},handler(t,r){const n=(Ae(r[0])?[r[0]]:qe(r[0],"ordgroup").body).map(function(t){const r=_e(t).text;if(-1!=="lc".indexOf(r))return{type:"align",align:r};throw new e("Unknown column alignment: "+r,t)});if(n.length>1)throw new e("{subarray} can contain only one column");let a={cols:n,envClasses:["small"]};if(a=ot(t.parser,a,"script"),a.body.length>0&&a.body[0].length>1)throw new e("{subarray} can contain only one column");return a},mathmlBuilder:ct}),ke({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){const t=ot(e.parser,{cols:[],envClasses:["cases"]},st(e.envName));return{type:"leftright",mode:e.mode,body:[t],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},mathmlBuilder:ct}),ke({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:ut,mathmlBuilder:ct}),ke({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:ut,mathmlBuilder:ct}),ke({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){"gathered"!==e.envName&&et(e);const t={cols:[],envClasses:["abut","jot"],autoTag:at(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return ot(e.parser,t,"display")},mathmlBuilder:ct}),ke({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){et(e);const t={autoTag:at(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,envClasses:["align"],leqno:e.parser.settings.leqno};return ot(e.parser,t,"display")},mathmlBuilder:ct}),ke({type:"array",names:["multline","multline*"],props:{numArgs:0},handler(e){et(e);const t={autoTag:"multline"===e.envName,maxNumCols:1,envClasses:["jot","multline"],leqno:e.parser.settings.leqno};return ot(e.parser,t,"display")},mathmlBuilder:ct}),ke({type:"array",names:["CD"],props:{numArgs:0},handler:t=>(et(t),function(t){const r=[];for(t.gullet.beginGroup(),t.gullet.macros.set("\\cr","\\\\\\relax"),t.gullet.beginGroup();;){r.push(t.parseExpression(!1,"\\\\")),t.gullet.endGroup(),t.gullet.beginGroup();const n=t.fetch().text;if("&"!==n&&"\\\\"!==n){if("\\end"===n){0===r[r.length-1].length&&r.pop();break}throw new e("Expected \\\\ or \\cr or \\end",t.nextToken)}t.consume()}let n=[];const a=[n];for(let o=0;o<r.length;o++){const s=r[o];let i=Ne();for(let r=0;r<s.length;r++)if(Te(s[r])){n.push(i),r+=1;const a=_e(s[r]).text,o=new Array(2);if(o[0]={type:"ordgroup",mode:"math",body:[]},o[1]={type:"ordgroup",mode:"math",body:[]},"=|.".indexOf(a)>-1);else{if(!("<>AV".indexOf(a)>-1))throw new e('Expected one of "<>AV=|." after @.');for(let t=0;t<2;t++){let n=!0;for(let i=r+1;i<s.length;i++){if($e(s[i],a)){n=!1,r=i;break}if(Te(s[i]))throw new e("Missing a "+a+" character to complete a CD arrow.",s[i]);o[t].body.push(s[i])}if(n)throw new e("Missing a "+a+" character to complete a CD arrow.",s[r])}}const l=Be(a,o,t);n.push(l),i=Ne()}else i.body.push(s[r]);o%2==0?n.push(i):n.shift(),n=[],a.push(n)}return a.pop(),t.gullet.endGroup(),t.gullet.endGroup(),{type:"array",mode:"math",body:a,tags:null,labels:new Array(a.length+1).fill(""),envClasses:["jot","cd"],cols:[],hLinesBeforeRow:new Array(a.length+1).fill([])}}(t.parser)),mathmlBuilder:ct}),l({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(t,r){throw new e(`${t.funcName} valid only within array environment`)}});const pt=ve;l({type:"bordermatrix",names:["\\bordermatrix","\\matrix"],props:{numArgs:0,numOptionalArgs:1},handler:({parser:e,funcName:t},r,n)=>{let a=["(",")"];if("\\bordermatrix"===t&&n[0]&&n[0].body){const e=n[0].body;2===e.length&&"atom"===e[0].type&&"atom"===e[1].type&&"open"===e[0].family&&"close"===e[1].family&&(a=[e[0].text,e[1].text])}e.consumeSpaces(),e.consume();const o=pt.bordermatrix,s={mode:e.mode,envName:t.slice(1),delimiters:a,parser:e},i=o.handler(s);return e.expect("}",!0),i}}),l({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler({parser:t,token:r},n){const a=qe(n[0],"ordgroup").body;let o="";for(let e=0;e<a.length;e++){o+=qe(a[e],"textord").text}const s=parseInt(o);if(isNaN(s))throw new e(`\\@char has non-numeric argument ${o}`,r);return{type:"textord",mode:t.mode,text:String.fromCodePoint(s)}}});const mt=/^(#[a-f0-9]{3}|#?[a-f0-9]{6})$/i,dt=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i,ht=/^ *\d{1,3} *(?:, *\d{1,3} *){2}$/,gt=/^ *[10](?:\.\d*)? *(?:, *[10](?:\.\d*)? *){2}$/,bt=/^[a-f0-9]{6}$/i,ft=e=>{let t=e.toString(16);return 1===t.length&&(t="0"+t),t},yt=JSON.parse('{\n  "Apricot": "#ffb484",\n  "Aquamarine": "#08b4bc",\n  "Bittersweet": "#c84c14",\n  "blue": "#0000FF",\n  "Blue": "#303494",\n  "BlueGreen": "#08b4bc",\n  "BlueViolet": "#503c94",\n  "BrickRed": "#b8341c",\n  "brown": "#BF8040",\n  "Brown": "#802404",\n  "BurntOrange": "#f8941c",\n  "CadetBlue": "#78749c",\n  "CarnationPink": "#f884b4",\n  "Cerulean": "#08a4e4",\n  "CornflowerBlue": "#40ace4",\n  "cyan": "#00FFFF",\n  "Cyan": "#08acec",\n  "Dandelion": "#ffbc44",\n  "darkgray": "#404040",\n  "DarkOrchid": "#a8548c",\n  "Emerald": "#08ac9c",\n  "ForestGreen": "#089c54",\n  "Fuchsia": "#90348c",\n  "Goldenrod": "#ffdc44",\n  "gray": "#808080",\n  "Gray": "#98949c",\n  "green": "#00FF00",\n  "Green": "#08a44c",\n  "GreenYellow": "#e0e474",\n  "JungleGreen": "#08ac9c",\n  "Lavender": "#f89cc4",\n  "lightgray": "#c0c0c0",\n  "lime": "#BFFF00",\n  "LimeGreen": "#90c43c",\n  "magenta": "#FF00FF",\n  "Magenta": "#f0048c",\n  "Mahogany": "#b0341c",\n  "Maroon": "#b03434",\n  "Melon": "#f89c7c",\n  "MidnightBlue": "#086494",\n  "Mulberry": "#b03c94",\n  "NavyBlue": "#086cbc",\n  "olive": "#7F7F00",\n  "OliveGreen": "#407c34",\n  "orange": "#FF8000",\n  "Orange": "#f8843c",\n  "OrangeRed": "#f0145c",\n  "Orchid": "#b074ac",\n  "Peach": "#f8945c",\n  "Periwinkle": "#8074bc",\n  "PineGreen": "#088c74",\n  "pink": "#ff7f7f",\n  "Plum": "#98248c",\n  "ProcessBlue": "#08b4ec",\n  "purple": "#BF0040",\n  "Purple": "#a0449c",\n  "RawSienna": "#983c04",\n  "red": "#ff0000",\n  "Red": "#f01c24",\n  "RedOrange": "#f86434",\n  "RedViolet": "#a0246c",\n  "Rhodamine": "#f0549c",\n  "Royallue": "#0874bc",\n  "RoyalPurple": "#683c9c",\n  "RubineRed": "#f0047c",\n  "Salmon": "#f8948c",\n  "SeaGreen": "#30bc9c",\n  "Sepia": "#701404",\n  "SkyBlue": "#48c4dc",\n  "SpringGreen": "#c8dc64",\n  "Tan": "#e09c74",\n  "teal": "#007F7F",\n  "TealBlue": "#08acb4",\n  "Thistle": "#d884b4",\n  "Turquoise": "#08b4cc",\n  "violet": "#800080",\n  "Violet": "#60449c",\n  "VioletRed": "#f054a4",\n  "WildStrawberry": "#f0246c",\n  "yellow": "#FFFF00",\n  "Yellow": "#fff404",\n  "YellowGreen": "#98cc6c",\n  "YellowOrange": "#ffa41c"\n}'),xt=(t,r)=>{let n="";if("HTML"===t){if(!mt.test(r))throw new e("Invalid HTML input.");n=r}else if("RGB"===t){if(!ht.test(r))throw new e("Invalid RGB input.");r.split(",").map(e=>{n+=ft(Number(e.trim()))})}else{if(!gt.test(r))throw new e("Invalid rbg input.");r.split(",").map(t=>{const r=Number(t.trim());if(r>1)throw new e("Color rgb input must be < 1.");n+=ft(Number((255*r).toFixed(0)))})}return"#"!==n.charAt(0)&&(n="#"+n),n},wt=(t,r,n)=>{const a=`\\\\color@${t}`;if(!dt.exec(t))throw new e("Invalid color: '"+t+"'",n);return bt.test(t)?"#"+t:("#"===t.charAt(0)||(r.has(a)?t=r.get(a).tokens[0].text:yt[t]&&(t=yt[t])),t)},vt=(e,t)=>{let r=oe(e.body,t.withColor(e.color));return 0===r.length&&r.push(new q.MathNode("mrow")),r=r.map(t=>(t.style.color=e.color,t)),q.newDocumentFragment(r)};l({type:"color",names:["\\textcolor"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","original"]},handler({parser:e,token:t},r,n){const a=n[0]&&qe(n[0],"raw").string;let o="";if(a){const e=qe(r[0],"raw").string;o=xt(a,e)}else o=wt(qe(r[0],"raw").string,e.gullet.macros,t);const s=r[1];return{type:"color",mode:e.mode,color:o,isTextColor:!0,body:p(s)}},mathmlBuilder:vt}),l({type:"color",names:["\\color"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw"]},handler({parser:e,breakOnTokenText:t,token:r},n,a){const o=a[0]&&qe(a[0],"raw").string;let s="";if(o){const e=qe(n[0],"raw").string;s=xt(o,e)}else s=wt(qe(n[0],"raw").string,e.gullet.macros,r);const i=e.parseExpression(!0,t,!0);return{type:"color",mode:e.mode,color:s,isTextColor:!1,body:i}},mathmlBuilder:vt}),l({type:"color",names:["\\definecolor"],props:{numArgs:3,allowedInText:!0,argTypes:["raw","raw","raw"]},handler({parser:t,funcName:r,token:n},a){const o=qe(a[0],"raw").string;if(!/^[A-Za-z]+$/.test(o))throw new e("Color name must be latin letters.",n);const s=qe(a[1],"raw").string;if(!["HTML","RGB","rgb"].includes(s))throw new e("Color model must be HTML, RGB, or rgb.",n);const i=qe(a[2],"raw").string,l=xt(s,i);return t.gullet.macros.set(`\\\\color@${o}`,{tokens:[{text:l}],numArgs:0}),{type:"internal",mode:t.mode}}}),l({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler({parser:e},t,r){const n="["===e.gullet.future().text?e.parseSizeGroup(!0):null,a=!e.settings.displayMode;return{type:"cr",mode:e.mode,newLine:a,size:n&&qe(n,"size").value}},mathmlBuilder(e,t){const r=new q.MathNode("mo");if(e.newLine&&(r.setAttribute("linebreak","newline"),e.size)){const n=ge(e.size,t);r.setAttribute("height",n.number+n.unit)}return r}});const kt={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},qt=t=>{const r=t.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(r))throw new e("Expected a control sequence",t);return r},_t=(e,t,r,n)=>{let a=e.gullet.macros.get(r.text);null==a&&(r.noexpand=!0,a={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,a,n)};l({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler({parser:t,funcName:r}){t.consumeSpaces();const n=t.fetch();if(kt[n.text])return"\\global"!==r&&"\\\\globallong"!==r||(n.text=kt[n.text]),qe(t.parseFunction(),"internal");throw new e("Invalid token after macro prefix",n)}}),l({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:r}){let n=t.gullet.popToken();const a=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(a))throw new e("Expected a control sequence",n);let o,s=0;const i=[[]];for(;"{"!==t.gullet.future().text;)if(n=t.gullet.popToken(),"#"===n.text){if("{"===t.gullet.future().text){o=t.gullet.future(),i[s].push("{");break}if(n=t.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new e(`Invalid argument number "${n.text}"`);if(parseInt(n.text)!==s+1)throw new e(`Argument number "${n.text}" out of order`);s++,i.push([])}else{if("EOF"===n.text)throw new e("Expected a macro definition");i[s].push(n.text)}let{tokens:l}=t.gullet.consumeArg();if(o&&l.unshift(o),"\\edef"===r||"\\xdef"===r){if(l=t.gullet.expandTokens(l),l.length>t.gullet.settings.maxExpand)throw new e("Too many expansions in an "+r);l.reverse()}return t.gullet.macros.set(a,{tokens:l,numArgs:s,delimiters:i},r===kt[r]),{type:"internal",mode:t.mode}}}),l({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=qt(e.gullet.popToken());e.gullet.consumeSpaces();const n=(e=>{let t=e.gullet.popToken();return"="===t.text&&(t=e.gullet.popToken()," "===t.text&&(t=e.gullet.popToken())),t})(e);return _t(e,r,n,"\\\\globallet"===t),{type:"internal",mode:e.mode}}}),l({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:e,funcName:t}){const r=qt(e.gullet.popToken()),n=e.gullet.popToken(),a=e.gullet.popToken();return _t(e,r,a,"\\\\globalfuture"===t),e.gullet.pushToken(a),e.gullet.pushToken(n),{type:"internal",mode:e.mode}}}),l({type:"internal",names:["\\newcommand","\\renewcommand","\\providecommand"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({parser:t,funcName:r}){let n="";const a=t.gullet.popToken();"{"===a.text?(n=qt(t.gullet.popToken()),t.gullet.popToken()):n=qt(a);const o=t.gullet.isDefined(n);if(o&&"\\newcommand"===r)throw new e(`\\newcommand{${n}} attempting to redefine ${n}; use \\renewcommand`);if(!o&&"\\renewcommand"===r)throw new e(`\\renewcommand{${n}} when command ${n} does not yet exist; use \\newcommand`);let s=0;if("["===t.gullet.future().text){let r=t.gullet.popToken();if(r=t.gullet.popToken(),!/^[0-9]$/.test(r.text))throw new e(`Invalid number of arguments: "${r.text}"`);if(s=parseInt(r.text),r=t.gullet.popToken(),"]"!==r.text)throw new e(`Invalid argument "${r.text}"`)}const{tokens:i}=t.gullet.consumeArg();return"\\providecommand"===r&&t.gullet.macros.has(n)||t.gullet.macros.set(n,{tokens:i,numArgs:s}),{type:"internal",mode:t.mode}}});const At={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},St=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","⦇","\\llparenthesis","⦈","\\rrparenthesis","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lAngle","⟪","\\rAngle","⟫","\\llangle","⦉","\\rrangle","⦊","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","\\llbracket","\\rrbracket","⟦","⟦","\\lBrace","\\rBrace","⦃","⦄","/","\\backslash","|","\\vert","\\|","\\Vert","‖","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."],Nt=["}","\\left","\\middle","\\right"],Tt=e=>e.length>0&&(St.includes(e)||At[e]||Nt.includes(e)),$t=[0,1.2,1.8,2.4,3];function Bt(t,r){const n=Ae(t);if(n&&St.includes(n.text))return["<","\\lt"].includes(n.text)&&(n.text="⟨"),[">","\\gt"].includes(n.text)&&(n.text="⟩"),n;throw new e(n?`Invalid delimiter '${n.text}' after '${r.funcName}'`:`Invalid delimiter type '${t.type}'`,t)}const Mt=["/","\\","\\backslash","\\vert","|"];l({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{const r=Bt(t[0],e),n={type:"delimsizing",mode:e.parser.mode,size:At[e.funcName].size,mclass:At[e.funcName].mclass,delim:r.text},a=e.parser.fetch().text;return"^"!==a&&"_"!==a?n:{type:"ordgroup",mode:"math",body:[n,{type:"ordgroup",mode:"math",body:[]}]}},mathmlBuilder:e=>{const t=[];"."===e.delim&&(e.delim=""),t.push(Q(e.delim,e.mode));const r=new q.MathNode("mo",t);return"mopen"===e.mclass||"mclose"===e.mclass?r.setAttribute("fence","true"):r.setAttribute("fence","false"),(Mt.includes(e.delim)||e.delim.indexOf("arrow")>-1)&&r.setAttribute("stretchy","true"),r.setAttribute("symmetric","true"),r.setAttribute("minsize",$t[e.size]+"em"),r.setAttribute("maxsize",$t[e.size]+"em"),r}}),l({type:"leftright-right",names:["\\right"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>({type:"leftright-right",mode:e.parser.mode,delim:Bt(t[0],e).text})}),l({type:"leftright",names:["\\left"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,r)=>{const n=Bt(r[0],t),a=t.parser;++a.leftrightDepth;let o=a.parseExpression(!1,null,!0),s=a.fetch();for(;"\\middle"===s.text;){a.consume();const t=a.fetch().text;if(!M.math[t])throw new e(`Invalid delimiter '${t}' after '\\middle'`);Bt({type:"atom",mode:"math",text:t},{funcName:"\\middle"}),o.push({type:"middle",mode:"math",delim:t}),a.consume(),o=o.concat(a.parseExpression(!1,null,!0)),s=a.fetch()}--a.leftrightDepth,a.expect("\\right",!1);const i=qe(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:o,left:n.text,right:i.delim}},mathmlBuilder:(e,t)=>{!function(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}(e);const r=oe(e.body,t);"."===e.left&&(e.left="");const n=new q.MathNode("mo",[Q(e.left,e.mode)]);n.setAttribute("fence","true"),n.setAttribute("form","prefix"),("/"===e.left||"\\"===e.left||e.left.indexOf("arrow")>-1)&&n.setAttribute("stretchy","true"),r.unshift(n),"."===e.right&&(e.right="");const a=new q.MathNode("mo",[Q(e.right,e.mode)]);if(a.setAttribute("fence","true"),a.setAttribute("form","postfix"),("∖"===e.right||e.right.indexOf("arrow")>-1)&&a.setAttribute("stretchy","true"),e.body.length>0){const t=e.body[e.body.length-1];"color"!==t.type||t.isTextColor||a.setAttribute("mathcolor",t.color)}return r.push(a),te(r)}}),l({type:"middle",names:["\\middle"],props:{numArgs:1,argTypes:["primitive"]},handler:(t,r)=>{const n=Bt(r[0],t);if(!t.parser.leftrightDepth)throw new e("\\middle without preceding \\left",n);return{type:"middle",mode:t.parser.mode,delim:n.text}},mathmlBuilder:(e,t)=>{const r=Q(e.delim,e.mode),n=new q.MathNode("mo",[r]);return n.setAttribute("fence","true"),e.delim.indexOf("arrow")>-1&&n.setAttribute("stretchy","true"),n.setAttribute("form","prefix"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});const Ot=e=>{const t=new q.MathNode("mspace");return t.setAttribute("width","3pt"),t},Ct=(e,t)=>{let r;switch(r=e.label.indexOf("colorbox")>-1||"\\boxed"===e.label?new q.MathNode("mrow",[Ot(),ie(e.body,t),Ot()]):new q.MathNode("menclose",[ie(e.body,t)]),e.label){case"\\overline":r.setAttribute("notation","top"),r.classes.push("tml-overline");break;case"\\underline":r.setAttribute("notation","bottom"),r.classes.push("tml-underline");break;case"\\cancel":r.setAttribute("notation","updiagonalstrike"),r.children.push(new q.MathNode("mrow",[],["tml-cancel","upstrike"]));break;case"\\bcancel":r.setAttribute("notation","downdiagonalstrike"),r.children.push(new q.MathNode("mrow",[],["tml-cancel","downstrike"]));break;case"\\sout":r.setAttribute("notation","horizontalstrike"),r.children.push(new q.MathNode("mrow",[],["tml-cancel","sout"]));break;case"\\xcancel":r.setAttribute("notation","updiagonalstrike downdiagonalstrike"),r.classes.push("tml-xcancel");break;case"\\longdiv":r.setAttribute("notation","longdiv"),r.classes.push("longdiv-top"),r.children.push(new q.MathNode("mrow",[],["longdiv-arc"]));break;case"\\phase":r.setAttribute("notation","phasorangle"),r.classes.push("phasor-bottom"),r.children.push(new q.MathNode("mrow",[],["phasor-angle"]));break;case"\\textcircled":r.setAttribute("notation","circle"),r.classes.push("circle-pad"),r.children.push(new q.MathNode("mrow",[],["textcircle"]));break;case"\\angl":r.setAttribute("notation","actuarial"),r.classes.push("actuarial");break;case"\\boxed":r.setAttribute("notation","box"),r.style.padding="padding: 3pt 0 3pt 0",r.style.border="1px solid",r.setAttribute("scriptlevel","0"),r.setAttribute("displaystyle","true");break;case"\\fbox":r.setAttribute("notation","box"),r.classes.push("tml-fbox");break;case"\\fcolorbox":case"\\colorbox":{const t={padding:"3pt 0 3pt 0"};"\\fcolorbox"===e.label&&(t.border="0.0667em solid "+String(e.borderColor)),r.style=t;break}}return e.backgroundColor&&r.setAttribute("mathbackground",e.backgroundColor),r};l({type:"enclose",names:["\\colorbox"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","text"]},handler({parser:e,funcName:t},r,n){const a=n[0]&&qe(n[0],"raw").string;let o="";if(a){const e=qe(r[0],"raw").string;o=xt(a,e)}else o=wt(qe(r[0],"raw").string,e.gullet.macros);const s=r[1];return{type:"enclose",mode:e.mode,label:t,backgroundColor:o,body:s}},mathmlBuilder:Ct}),l({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,numOptionalArgs:1,allowedInText:!0,argTypes:["raw","raw","raw","text"]},handler({parser:e,funcName:t},r,n){const a=n[0]&&qe(n[0],"raw").string;let o,s="";if(a){const e=qe(r[0],"raw").string,t=qe(r[0],"raw").string;s=xt(a,e),o=xt(a,t)}else s=wt(qe(r[0],"raw").string,e.gullet.macros),o=wt(qe(r[1],"raw").string,e.gullet.macros);const i=r[2];return{type:"enclose",mode:e.mode,label:t,backgroundColor:o,borderColor:s,body:i}},mathmlBuilder:Ct}),l({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"enclose",mode:e.mode,label:"\\fbox",body:t[0]})}),l({type:"enclose",names:["\\angl","\\cancel","\\bcancel","\\xcancel","\\sout","\\overline","\\boxed","\\longdiv","\\phase"],props:{numArgs:1},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Ct}),l({type:"enclose",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Ct}),l({type:"enclose",names:["\\textcircled"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"enclose",mode:e.mode,label:t,body:n}},mathmlBuilder:Ct}),l({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler({parser:t,funcName:r},n){const a=n[0];if("ordgroup"!==a.type)throw new e("Invalid environment name",a);let o="";for(let e=0;e<a.body.length;++e)o+=qe(a.body[e],"textord").text;if("\\begin"===r){if(!Object.prototype.hasOwnProperty.call(pt,o))throw new e("No such environment: "+o,a);const r=pt[o],{args:n,optArgs:s}=t.parseArguments("\\begin{"+o+"}",r),i={mode:t.mode,envName:o,parser:t},l=r.handler(i,n,s);t.expect("\\end",!1);const c=t.nextToken,u=qe(t.parseFunction(),"environment");if(u.name!==o)throw new e(`Mismatch: \\begin{${o}} matched by \\end{${u.name}}`,c);return l}return{type:"environment",mode:t.mode,name:o,nameGroup:a}}}),l({type:"envTag",names:["\\env@tag"],props:{numArgs:1,argTypes:["math"]},handler:({parser:e},t)=>({type:"envTag",mode:e.mode,body:t[0]}),mathmlBuilder:(e,t)=>new q.MathNode("mrow")}),l({type:"noTag",names:["\\env@notag"],props:{numArgs:0},handler:({parser:e})=>({type:"noTag",mode:e.mode}),mathmlBuilder:(e,t)=>new q.MathNode("mrow")});const zt=(e,t)=>{const r=e.font,n=t.withFont(r),a=ie(e.body,n);if(0===a.children.length)return a;if("boldsymbol"===r&&["mo","mpadded","mrow"].includes(a.type))return a.style.fontWeight="bold",a;if(((e,t)=>{if("mathrm"!==t||"ordgroup"!==e.body.type||1===e.body.body.length)return!1;if("mathord"!==e.body.body[0].type)return!1;for(let t=1;t<e.body.body.length;t++){const r=e.body.body[t].type;if("mathord"!==r&&("textord"!==r||isNaN(e.body.body[t].text)))return!1}return!0})(e,r)){const e=a.children[0].children[0].children?a.children[0].children[0]:a.children[0];delete e.attributes.mathvariant;for(let t=1;t<a.children.length;t++)e.children[0].text+=a.children[t].children[0].children?a.children[t].children[0].children[0].text:a.children[t].children[0].text;const t=new q.MathNode("mpadded",[e]);return t.setAttribute("lspace","0"),t}let o="mo"===a.children[0].type;for(let e=1;e<a.children.length;e++){"mo"===a.children[e].type&&"boldsymbol"===r&&(a.children[e].style.fontWeight="bold"),"mi"!==a.children[e].type&&(o=!1);"normal"!==(a.children[e].attributes&&a.children[e].attributes.mathvariant||"")&&(o=!1)}if(!o)return a;const s=a.children[0];for(let e=1;e<a.children.length;e++)s.children.push(a.children[e].children[0]);if(s.attributes.mathvariant&&"normal"===s.attributes.mathvariant){const e=new q.MathNode("mtext",new q.TextNode("​"));return new q.MathNode("mrow",[e,s])}return s},Lt={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};l({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\up@greek","\\boldsymbol","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathsfit","\\mathtt","\\Bbb","\\bm","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=u(r[0]);let a=t;return a in Lt&&(a=Lt[a]),{type:"font",mode:e.mode,font:a.slice(1),body:n}},mathmlBuilder:zt}),l({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:({parser:e,funcName:t,breakOnTokenText:r},n)=>{const{mode:a}=e,o=e.parseExpression(!0,r,!0);return{type:"font",mode:a,font:`math${t.slice(1)}`,body:{type:"ordgroup",mode:e.mode,body:o}}},mathmlBuilder:zt});const Dt=["display","text","script","scriptscript"],It={auto:-1,display:0,text:0,script:1,scriptscript:2},Ft=(e,t)=>{const r="auto"===e.scriptLevel?t.incrementLevel():"display"===e.scriptLevel?t.withLevel(De):"text"===e.scriptLevel?t.withLevel(Ie):t.withLevel(Fe),n=ie(e.numer,r),a=ie(e.denom,r);3===t.level&&(n.style.mathDepth="2",n.setAttribute("scriptlevel","2"),a.style.mathDepth="2",a.setAttribute("scriptlevel","2"));let o=new q.MathNode("mfrac",[n,a]);if(e.hasBarLine){if(e.barSize){const r=ge(e.barSize,t);o.setAttribute("linethickness",r.number+r.unit)}}else o.setAttribute("linethickness","0px");if(null!=e.leftDelim||null!=e.rightDelim){const t=[];if(null!=e.leftDelim){const r=new q.MathNode("mo",[new q.TextNode(e.leftDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}if(t.push(o),null!=e.rightDelim){const r=new q.MathNode("mo",[new q.TextNode(e.rightDelim.replace("\\",""))]);r.setAttribute("fence","true"),t.push(r)}o=te(t)}return"auto"!==e.scriptLevel&&(o=new q.MathNode("mstyle",[o]),o.setAttribute("displaystyle",String("display"===e.scriptLevel)),o.setAttribute("scriptlevel",It[e.scriptLevel])),o};l({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],a=r[1];let o=!1,s=null,i=null,l="auto";switch(t){case"\\dfrac":case"\\frac":case"\\tfrac":o=!0;break;case"\\\\atopfrac":o=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":s="(",i=")";break;case"\\\\bracefrac":s="\\{",i="\\}";break;case"\\\\brackfrac":s="[",i="]";break;default:throw new Error("Unrecognized genfrac command")}switch(t){case"\\dfrac":case"\\dbinom":l="display";break;case"\\tfrac":case"\\tbinom":l="text"}return{type:"genfrac",mode:e.mode,continued:!1,numer:n,denom:a,hasBarLine:o,leftDelim:s,rightDelim:i,scriptLevel:l,barSize:null}},mathmlBuilder:Ft}),l({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:({parser:e,funcName:t},r)=>{const n=r[0],a=r[1];return{type:"genfrac",mode:e.mode,continued:!0,numer:n,denom:a,hasBarLine:!0,leftDelim:null,rightDelim:null,scriptLevel:"display",barSize:null}}}),l({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler({parser:e,funcName:t,token:r}){let n;switch(t){case"\\over":n="\\frac";break;case"\\choose":n="\\binom";break;case"\\atop":n="\\\\atopfrac";break;case"\\brace":n="\\\\bracefrac";break;case"\\brack":n="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:n,token:r}}});const Gt=function(e){let t=null;return e.length>0&&(t=e,t="."===t?null:t),t};l({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler({parser:e},t){const r=t[4],n=t[5],a=u(t[0]),o="atom"===a.type&&"open"===a.family?Gt(a.text):null,s=u(t[1]),i="atom"===s.type&&"close"===s.family?Gt(s.text):null,l=qe(t[2],"size");let c,p=null;l.isBlank?c=!0:(p=l.value,c=p.number>0);let m="auto",d=t[3];if("ordgroup"===d.type){if(d.body.length>0){const e=qe(d.body[0],"textord");m=Dt[Number(e.text)]}}else d=qe(d,"textord"),m=Dt[Number(d.text)];return{type:"genfrac",mode:e.mode,numer:r,denom:n,continued:!1,hasBarLine:c,barSize:p,leftDelim:o,rightDelim:i,scriptLevel:m}},mathmlBuilder:Ft}),l({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:({parser:e,funcName:t,token:r},n)=>({type:"infix",mode:e.mode,replaceWith:"\\\\abovefrac",barSize:qe(n[0],"size").value,token:r})}),l({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:({parser:e,funcName:t},r)=>{const n=r[0],a=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e}(qe(r[1],"infix").barSize),o=r[2],s=a.number>0;return{type:"genfrac",mode:e.mode,numer:n,denom:o,continued:!1,hasBarLine:s,barSize:a,leftDelim:null,rightDelim:null,scriptLevel:"auto"}},mathmlBuilder:Ft}),l({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["hbox"],allowedInArgument:!0,allowedInText:!1},handler:({parser:e},t)=>({type:"hbox",mode:e.mode,body:p(t[0])}),mathmlBuilder(e,t){const r=t.withLevel(De),n=se(e.body,r);return ee(n)}});l({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:({parser:e,funcName:t},r)=>({type:"horizBrace",mode:e.mode,label:t,isOver:/^\\over/.test(t),base:r[0]}),mathmlBuilder:(e,t)=>{const r=T(e.label);return r.style["math-depth"]=0,new q.MathNode(e.isOver?"mover":"munder",[ie(e.base,t),r])}}),l({type:"html",names:["\\class","\\id","\\style","\\data"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:({parser:t,funcName:r,token:n},a)=>{const o=qe(a[0],"raw").string,s=a[1];if(t.settings.strict)throw new e(`Function "${r}" is disabled in strict mode`,n);let i;const l={};switch(r){case"\\class":l.class=o,i={command:"\\class",class:o};break;case"\\id":l.id=o,i={command:"\\id",id:o};break;case"\\style":l.style=o,i={command:"\\style",style:o};break;case"\\data":{const t=o.split(",");for(let r=0;r<t.length;r++){const n=t[r].split("=");if(2!==n.length)throw new e("Error parsing key-value for \\data");l["data-"+n[0].trim()]=n[1].trim()}i={command:"\\data",attributes:l};break}default:throw new Error("Unrecognized html command")}if(!t.settings.isTrusted(i))throw new e(`Function "${r}" is not trusted`,n);return{type:"html",mode:t.mode,attributes:l,body:p(s)}},mathmlBuilder:(e,t)=>{const r=se(e.body,t),n=[];e.attributes.class&&n.push(...e.attributes.class.trim().split(/\s+/)),r.classes=n;for(const t in e.attributes)"class"!==t&&Object.prototype.hasOwnProperty.call(e.attributes,t)&&r.setAttribute(t,e.attributes[t]);return r}});const Et=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};{const n=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!n)throw new e("Invalid size: '"+t+"' in \\includegraphics");const a={number:+(n[1]+n[2]),unit:n[3]};if("string"!=typeof(r=a)&&(r=r.unit),!(de.indexOf(r)>-1))throw new e("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a}var r};l({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:({parser:t,token:r},n,a)=>{let o={number:0,unit:"em"},s={number:.9,unit:"em"},i={number:0,unit:"em"},l="";if(a[0]){const t=qe(a[0],"raw").string.split(",");for(let r=0;r<t.length;r++){const n=t[r].split("=");if(2===n.length){const t=n[1].trim();switch(n[0].trim()){case"alt":l=t;break;case"width":o=Et(t);break;case"height":s=Et(t);break;case"totalheight":i=Et(t);break;default:throw new e("Invalid key: '"+n[0]+"' in \\includegraphics.")}}}}const c=qe(n[0],"url").url;if(""===l&&(l=c,l=l.replace(/^.*[\\/]/,""),l=l.substring(0,l.lastIndexOf("."))),!t.settings.isTrusted({command:"\\includegraphics",url:c}))throw new e('Function "\\includegraphics" is not trusted',r);return{type:"includegraphics",mode:t.mode,alt:l,width:o,height:s,totalheight:i,src:c}},mathmlBuilder:(e,t)=>{const r=ge(e.height,t),n={number:0,unit:"em"};e.totalheight.number>0&&e.totalheight.unit===r.unit&&e.totalheight.number>r.number&&(n.number=e.totalheight.number-r.number,n.unit=r.unit);let a=0;e.width.number>0&&(a=ge(e.width,t));const o={height:r.number+n.number+"em"};a.number>0&&(o.width=a.number+a.unit),n.number>0&&(o.verticalAlign=-n.number+n.unit);const s=new x(e.src,e.alt,o);return s.height=r,s.depth=n,new q.MathNode("mtext",[s])}}),l({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler({parser:t,funcName:r,token:n},a){const o=qe(a[0],"size");if(t.settings.strict){const a="m"===r[1],s="mu"===o.value.unit;if(a){if(!s)throw new e(`LaTeX's ${r} supports only mu units, not ${o.value.unit} units`,n);if("math"!==t.mode)throw new e(`LaTeX's ${r} works only in math mode`,n)}else if(s)throw new e(`LaTeX's ${r} doesn't support mu units`,n)}return{type:"kern",mode:t.mode,dimension:o.value}},mathmlBuilder(e,t){const r=ge(e.dimension,t),n=r.number>0&&"em"===r.unit?Pt(r.number):"";if("text"===e.mode&&n.length>0){const e=new q.TextNode(n);return new q.MathNode("mtext",[e])}if(r.number>=0){const e=new q.MathNode("mspace");return e.setAttribute("width",r.number+r.unit),e}{const e=new q.MathNode("mrow");return e.style.marginLeft=r.number+r.unit,e}}});const Pt=function(e){return e>=.05555&&e<=.05556?" ":e>=.1666&&e<=.1667?" ":e>=.2222&&e<=.2223?" ":e>=.2777&&e<=.2778?"  ":""},Rt=/[^A-Za-z_0-9-]/g;l({type:"label",names:["\\label"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e},t)=>({type:"label",mode:e.mode,string:t[0].string.replace(Rt,"")}),mathmlBuilder(e,t){const r=new q.MathNode("mrow",[],["tml-label"]);return e.string.length>0&&r.setLabel(e.string),r}});const jt=["\\clap","\\llap","\\rlap"];l({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap","\\clap","\\llap","\\rlap"],props:{numArgs:1,allowedInText:!0},handler:({parser:t,funcName:r,token:n},a)=>{if(jt.includes(r)){if(t.settings.strict&&"text"!==t.mode)throw new e(`{${r}} can be used only in text mode.\n Try \\math${r.slice(1)}`,n);r=r.slice(1)}else r=r.slice(5);const o=a[0];return{type:"lap",mode:t.mode,alignment:r,body:o}},mathmlBuilder:(e,t)=>{let r;if("llap"===e.alignment){const n=oe(p(e.body),t),a=new q.MathNode("mphantom",n);r=new q.MathNode("mpadded",[a]),r.setAttribute("width","0.1px")}const n=ie(e.body,t);let a;if("llap"===e.alignment?(n.style.position="absolute",n.style.right="0",n.style.bottom="0",a=new q.MathNode("mpadded",[r,n])):a=new q.MathNode("mpadded",[n]),"rlap"===e.alignment)e.body.body.length>0&&"genfrac"===e.body.body[0].type&&a.setAttribute("lspace","0.16667em");else{const t="llap"===e.alignment?"-1":"-0.5";a.setAttribute("lspace",t+"width"),"llap"===e.alignment?a.style.position="relative":(a.style.display="flex",a.style.justifyContent="center")}return a.setAttribute("width","0.1px"),a}}),l({type:"ordgroup",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler({funcName:e,parser:t},r){const n=t.mode;t.switchMode("math");const a="\\("===e?"\\)":"$",o=t.parseExpression(!1,a);return t.expect(a),t.switchMode(n),{type:"ordgroup",mode:t.mode,body:o}}}),l({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(t,r){throw new e(`Mismatched ${t.funcName}`,r)}});l({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:({parser:e},t)=>({type:"mathchoice",mode:e.mode,display:p(t[0]),text:p(t[1]),script:p(t[2]),scriptscript:p(t[3])}),mathmlBuilder:(e,t)=>{const r=((e,t)=>{switch(t.level){case Le:return e.display;case De:return e.text;case Ie:return e.script;case Fe:return e.scriptscript;default:return e.text}})(e,t);return se(r,t)}});const Vt=["text","textord","mathord","atom"];function Zt(e,t){let r;const n=oe(e.body,t);if("minner"===e.mclass)r=new q.MathNode("mpadded",n);else if("mord"===e.mclass)e.isCharacterBox||"mathord"===n[0].type?(r=n[0],r.type="mi",1===r.children.length&&r.children[0].text&&"∇"===r.children[0].text&&r.setAttribute("mathvariant","normal")):r=new q.MathNode("mi",n);else{r=new q.MathNode("mrow",n),e.mustPromote?(r=n[0],r.type="mo",e.isCharacterBox&&e.body[0].text&&/[A-Za-z]/.test(e.body[0].text)&&r.setAttribute("mathvariant","italic")):r=new q.MathNode("mrow",n);const a=t.level<2;"mrow"===r.type?a&&("mbin"===e.mclass?(r.children.unshift(be(.2222)),r.children.push(be(.2222))):"mrel"===e.mclass?(r.children.unshift(be(.2778)),r.children.push(be(.2778))):"mpunct"===e.mclass?r.children.push(be(.1667)):"minner"===e.mclass&&(r.children.unshift(be(.0556)),r.children.push(be(.0556)))):"mbin"===e.mclass?(r.attributes.lspace=a?"0.2222em":"0",r.attributes.rspace=a?"0.2222em":"0"):"mrel"===e.mclass?(r.attributes.lspace=a?"0.2778em":"0",r.attributes.rspace=a?"0.2778em":"0"):"mpunct"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace=a?"0.1667em":"0"):"mopen"===e.mclass||"mclose"===e.mclass?(r.attributes.lspace="0em",r.attributes.rspace="0em"):"minner"===e.mclass&&a&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em"),"mopen"!==e.mclass&&"mclose"!==e.mclass&&(delete r.attributes.stretchy,delete r.attributes.form)}return r}l({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler({parser:e,funcName:t},r){const n=r[0],a=o.isCharacterBox(n);let s=!0;const i={type:"mathord",text:"",mode:e.mode},l=n.body?n.body:[n];for(const t of l){if(!Vt.includes(t.type)){s=!1;break}M[e.mode][t.text]?i.text+=M[e.mode][t.text].replace:t.text?i.text+=t.text:t.body&&t.body.map(e=>{i.text+=e.text})}return s&&"\\mathord"===t&&"mathord"===i.type&&i.text.length>1?i:{type:"mclass",mode:e.mode,mclass:"m"+t.slice(5),body:p(s?i:n),isCharacterBox:a,mustPromote:s}},mathmlBuilder:Zt});const Ht=e=>{const t="ordgroup"===e.type&&e.body.length&&1===e.body.length?e.body[0]:e;return"atom"!==t.type||"bin"!==t.family&&"rel"!==t.family?"mord":"m"+t.family};l({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:({parser:e},t)=>({type:"mclass",mode:e.mode,mclass:Ht(t[0]),body:p(t[1]),isCharacterBox:o.isCharacterBox(t[1])})}),l({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler({parser:e,funcName:t},r){const n=r[1],a=r[0];let o;o="\\stackrel"!==t?Ht(n):"mrel";const s={type:"mrel"===o||"mbin"===o?"op":"ordgroup",mode:n.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:"\\stackrel"!==t,body:p(n)};return{type:"supsub",mode:a.mode,stack:!0,base:s,sup:"\\underset"===t?null:a,sub:"\\underset"===t?a:null}},mathmlBuilder:Zt});const Ut=(e,t,r)=>{if(!e)return r;const n=ie(e,t);return"mrow"===n.type&&0===n.children.length?r:n};l({type:"multiscript",names:["\\sideset","\\pres@cript"],props:{numArgs:3},handler({parser:t,funcName:r,token:n},a){if(0===a[2].body.length)throw new e(r+"cannot parse an empty base.");const o=a[2].body[0];if(t.settings.strict&&"\\sideset"===r&&!o.symbol)throw new e("The base of \\sideset must be a big operator. Try \\prescript.");if(a[0].body.length>0&&"supsub"!==a[0].body[0].type||a[1].body.length>0&&"supsub"!==a[1].body[0].type)throw new e("\\sideset can parse only subscripts and superscripts in its first two arguments",n);const s=a[0].body.length>0?a[0].body[0]:null,i=a[1].body.length>0?a[1].body[0]:null;return s||i?s?{type:"multiscript",mode:t.mode,isSideset:"\\sideset"===r,prescripts:s,postscripts:i,base:o}:{type:"styling",mode:t.mode,scriptLevel:"text",body:[{type:"supsub",mode:t.mode,base:o,sup:i.sup,sub:i.sub}]}:o},mathmlBuilder(e,t){const r=ie(e.base,t),n=new q.MathNode("mprescripts"),a=new q.MathNode("none");let o=[];const s=Ut(e.prescripts.sub,t,a),i=Ut(e.prescripts.sup,t,a);if(e.isSideset&&(s.setAttribute("style","text-align: left;"),i.setAttribute("style","text-align: left;")),e.postscripts){o=[r,Ut(e.postscripts.sub,t,a),Ut(e.postscripts.sup,t,a),n,s,i]}else o=[r,n,s,i];return new q.MathNode("mmultiscripts",o)}}),l({type:"not",names:["\\not"],props:{numArgs:1,primitive:!0,allowedInText:!1},handler({parser:e},t){const r=o.isCharacterBox(t[0]);let n;if(r)n=p(t[0]),"\\"===n[0].text.charAt(0)&&(n[0].text=M.math[n[0].text].replace),n[0].text=n[0].text.slice(0,1)+"̸"+n[0].text.slice(1);else{n=[{type:"textord",mode:"math",text:"̸"},{type:"kern",mode:"math",dimension:{number:-.6,unit:"em"}},t[0]]}return{type:"not",mode:e.mode,body:n,isCharacterBox:r}},mathmlBuilder(e,t){if(e.isCharacterBox){return oe(e.body,t,!0)[0]}return se(e.body,t)}});const Xt=["textord","mathord","atom"],Wt=["\\smallint"],Kt=["textord","mathord","ordgroup","close","leftright","font"],Jt=e=>{e.attributes.lspace="0.1667em",e.attributes.rspace="0.1667em"},Qt=(e,t)=>{let r;if(e.symbol)r=new w("mo",[Q(e.name,e.mode)]),Wt.includes(e.name)?r.setAttribute("largeop","false"):r.setAttribute("movablelimits","false"),e.fromMathOp&&Jt(r);else if(e.body)r=new w("mo",oe(e.body,t)),e.fromMathOp&&Jt(r);else if(r=new w("mi",[new v(e.name.slice(1))]),!e.parentIsSupSub){const t=[r,new w("mo",[Q("⁡","text")])];if(e.needsLeadingSpace){const e=new w("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){const e=new w("mspace");e.setAttribute("width","0.1667em"),t.push(e)}r=new w("mrow",t)}return r},Yt={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨅":"\\bigsqcap","⨆":"\\bigsqcup","⨃":"\\bigcupdot","⨇":"\\bigdoublevee","⨈":"\\bigdoublewedge","⨉":"\\bigtimes"};l({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcupplus","\\bigcupdot","\\bigcap","\\bigcup","\\bigdoublevee","\\bigdoublewedge","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcap","\\bigsqcup","\\bigtimes","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨃","⨄","⨅","⨆","⨇","⨈","⨉"],props:{numArgs:0},handler:({parser:e,funcName:t},r)=>{let n=t;return 1===n.length&&(n=Yt[n]),{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!0,stack:!1,name:n}},mathmlBuilder:Qt}),l({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:({parser:e},t)=>{const r=t[0],n=r.body?r.body:[r],a=1===n.length&&Xt.includes(n[0].type);return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:a,fromMathOp:!0,stack:!1,name:a?n[0].text:null,body:a?null:p(r)}},mathmlBuilder:Qt});const er={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint","∱":"\\intclockwise","∲":"\\varointclockwise","⨌":"\\iiiint","⨍":"\\intbar","⨎":"\\intBar","⨏":"\\fint","⨒":"\\rppolint","⨓":"\\scpolint","⨕":"\\pointint","⨖":"\\sqint","⨗":"\\intlarhk","⨘":"\\intx","⨙":"\\intcap","⨚":"\\intcup"};l({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\sgn","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Tt(n),needsLeadingSpace:r.length>0&&Kt.includes(r),name:t}},mathmlBuilder:Qt}),l({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler({parser:e,funcName:t}){const r=e.prevAtomType,n=e.gullet.future().text;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,stack:!1,isFollowedByDelimiter:Tt(n),needsLeadingSpace:r.length>0&&Kt.includes(r),name:t}},mathmlBuilder:Qt}),l({type:"op",names:["\\int","\\iint","\\iiint","\\iiiint","\\oint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\intbar","\\intBar","\\fint","\\rppolint","\\scpolint","\\pointint","\\sqint","\\intlarhk","\\intx","\\intcap","\\intcup","∫","∬","∭","∮","∯","∰","∱","∲","⨌","⨍","⨎","⨏","⨒","⨓","⨕","⨖","⨗","⨘","⨙","⨚"],props:{numArgs:0},handler({parser:e,funcName:t}){let r=t;return 1===r.length&&(r=er[r]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,stack:!1,name:r}},mathmlBuilder:Qt});l({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1,allowedInArgument:!0},handler:({parser:e,funcName:t},r)=>{const n=r[0],a=e.prevAtomType,o=e.gullet.future().text;return{type:"operatorname",mode:e.mode,body:p(n),alwaysHandleSupSub:"\\operatornamewithlimits"===t,limits:!1,parentIsSupSub:!1,isFollowedByDelimiter:Tt(o),needsLeadingSpace:a.length>0&&Kt.includes(a)}},mathmlBuilder:(e,t)=>{let r,n=oe(e.body,t.withFont("mathrm")),a=!0;for(let e=0;e<n.length;e++){let t=n[e];if(t instanceof q.MathNode)switch(("mrow"===t.type||"mpadded"===t.type)&&1===t.children.length&&t.children[0]instanceof q.MathNode&&(t=t.children[0]),t.type){case"mi":case"mn":case"ms":case"mtext":break;case"mspace":if(t.attributes.width){const r=t.attributes.width.replace("em",""),o=Pt(Number(r));""===o?a=!1:n[e]=new q.MathNode("mtext",[new q.TextNode(o)])}break;case"mo":{const e=t.children[0];1===t.children.length&&e instanceof q.TextNode?e.text=e.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){const e=n.map(e=>e.toText()).join("");n=[new q.TextNode(e)]}else if(1===n.length&&["mover","munder"].includes(n[0].type)&&("mi"===n[0].children[0].type||"mtext"===n[0].children[0].type)){if(n[0].children[0].type="mi",e.parentIsSupSub)return new q.MathNode("mrow",n);{const e=new q.MathNode("mo",[Q("⁡","text")]);return q.newDocumentFragment([n[0],e])}}if(a?(r=new q.MathNode("mi",n),1===n[0].text.length&&r.setAttribute("mathvariant","normal")):r=new q.MathNode("mrow",n),!e.parentIsSupSub){const t=[r,new q.MathNode("mo",[Q("⁡","text")])];if(e.needsLeadingSpace){const e=new q.MathNode("mspace");e.setAttribute("width","0.1667em"),t.unshift(e)}if(!e.isFollowedByDelimiter){const e=new q.MathNode("mspace");e.setAttribute("width","0.1667em"),t.push(e)}return q.newDocumentFragment(t)}return r}}),Ee("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),c({type:"ordgroup",mathmlBuilder:(e,t)=>se(e.body,t,e.semisimple)}),l({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"phantom",mode:e.mode,body:p(r)}},mathmlBuilder:(e,t)=>{const r=oe(e.body,t);return new q.MathNode("mphantom",r)}}),l({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"hphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=oe(p(e.body),t),n=new q.MathNode("mphantom",r),a=new q.MathNode("mpadded",[n]);return a.setAttribute("height","0px"),a.setAttribute("depth","0px"),a}}),l({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>{const r=t[0];return{type:"vphantom",mode:e.mode,body:r}},mathmlBuilder:(e,t)=>{const r=oe(p(e.body),t),n=new q.MathNode("mphantom",r),a=new q.MathNode("mpadded",[n]);return a.setAttribute("width","0px"),a}}),l({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler:({parser:e},t)=>({type:"pmb",mode:e.mode,body:p(t[0])}),mathmlBuilder(e,t){const r=oe(e.body,t),n=k(r);return n.setAttribute("style","font-weight:bold"),n}});const tr=(e,t)=>{const r=t.withLevel(De),n=new q.MathNode("mpadded",[ie(e.body,r)]),a=ge(e.dy,t);return n.setAttribute("voffset",a.number+a.unit),a.number>0?n.style.padding=a.number+a.unit+" 0 0 0":n.style.padding="0 0 "+Math.abs(a.number)+a.unit+" 0",n};l({type:"raise",names:["\\raise","\\lower"],props:{numArgs:2,argTypes:["size","primitive"],primitive:!0},handler({parser:e,funcName:t},r){const n=qe(r[0],"size").value;"\\lower"===t&&(n.number*=-1);const a=r[1];return{type:"raise",mode:e.mode,dy:n,body:a}},mathmlBuilder:tr}),l({type:"raise",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler({parser:e,funcName:t},r){const n=qe(r[0],"size").value,a=r[1];return{type:"raise",mode:e.mode,dy:n,body:a}},mathmlBuilder:tr}),l({type:"ref",names:["\\ref","\\eqref"],props:{numArgs:1,argTypes:["raw"]},handler:({parser:e,funcName:t},r)=>({type:"ref",mode:e.mode,funcName:t,string:r[0].string.replace(Rt,"")}),mathmlBuilder(e,t){const r="\\ref"===e.funcName?["tml-ref"]:["tml-ref","tml-eqref"];return new y("#"+e.string,r,null)}}),l({type:"reflect",names:["\\reflectbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:({parser:e},t)=>({type:"reflect",mode:e.mode,body:t[0]}),mathmlBuilder(e,t){const r=ie(e.body,t);return r.style.transform="scaleX(-1)",r}}),l({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler:({parser:e})=>({type:"internal",mode:e.mode})}),l({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler({parser:e},t,r){const n=r[0],a=qe(t[0],"size"),o=qe(t[1],"size");return{type:"rule",mode:e.mode,shift:n&&qe(n,"size").value,width:a.value,height:o.value}},mathmlBuilder(e,t){const r=ge(e.width,t),n=ge(e.height,t),a=e.shift?ge(e.shift,t):{number:0,unit:"em"},o=t.color&&t.getColor()||"black",s=new q.MathNode("mspace");if(r.number>0&&n.number>0&&s.setAttribute("mathbackground",o),s.setAttribute("width",r.number+r.unit),s.setAttribute("height",n.number+n.unit),0===a.number)return s;const i=new q.MathNode("mpadded",[s]);return a.number>=0?i.setAttribute("height","+"+a.number+a.unit):(i.setAttribute("height",a.number+a.unit),i.setAttribute("depth","+"+-a.number+a.unit)),i.setAttribute("voffset",a.number+a.unit),i}});const rr=/^[0-9]$/,nr={0:"₀",1:"₁",2:"₂",3:"₃",4:"₄",5:"₅",6:"₆",7:"₇",8:"₈",9:"₉"},ar={0:"⁰",1:"¹",2:"²",3:"³",4:"⁴",5:"⁵",6:"⁶",7:"⁷",8:"⁸",9:"⁹"};l({type:"sfrac",names:["\\sfrac"],props:{numArgs:2,allowedInText:!0,allowedInMath:!0},handler({parser:t},r){let n="";for(const t of r[0].body){if("textord"!==t.type||!rr.test(t.text))throw new e("Numerator must be an integer.",t);n+=t.text}let a="";for(const t of r[1].body){if("textord"!==t.type||!rr.test(t.text))throw new e("Denominator must be an integer.",t);a+=t.text}return{type:"sfrac",mode:t.mode,numerator:n,denominator:a}},mathmlBuilder(e,t){const r=e.numerator.split("").map(e=>ar[e]).join(""),n=e.denominator.split("").map(e=>nr[e]).join(""),a=new q.TextNode(r+"⁄"+n,e.mode,t);return new q.MathNode("mn",[a],["special-fraction"])}});const or={"\\tiny":.5,"\\sixptsize":.6,"\\Tiny":.6,"\\scriptsize":.7,"\\footnotesize":.8,"\\small":.9,"\\normalsize":1,"\\large":1.2,"\\Large":1.44,"\\LARGE":1.728,"\\huge":2.074,"\\Huge":2.488};l({type:"sizing",names:["\\tiny","\\sixptsize","\\Tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],props:{numArgs:0,allowedInText:!0},handler:({breakOnTokenText:e,funcName:t,parser:r},n)=>{r.settings.strict&&"math"===r.mode&&console.log(`Temml strict-mode warning: Command ${t} is invalid in math mode.`);const a=r.parseExpression(!1,e,!0);return{type:"sizing",mode:r.mode,funcName:t,body:a}},mathmlBuilder:(e,t)=>{const r=t.withFontSize(or[e.funcName]),n=oe(e.body,r),a=k(n),o=(or[e.funcName]/t.fontSize).toFixed(4);return a.setAttribute("mathsize",o+"em"),a}}),l({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:({parser:e},t,r)=>{let n=!1,a=!1;const o=r[0]&&qe(r[0],"ordgroup");if(o){let e="";for(let t=0;t<o.body.length;++t){if(e=o.body[t].text,"t"===e)n=!0;else{if("b"!==e){n=!1,a=!1;break}a=!0}}}else n=!0,a=!0;const s=t[0];return{type:"smash",mode:e.mode,body:s,smashHeight:n,smashDepth:a}},mathmlBuilder:(e,t)=>{const r=new q.MathNode("mpadded",[ie(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});const sr=["a","c","e","ı","m","n","o","r","s","u","v","w","x","z","α","ε","ι","κ","ν","ο","π","σ","τ","υ","ω","\\alpha","\\epsilon","\\iota","\\kappa","\\nu","\\omega","\\pi","\\tau","\\omega"];l({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler({parser:e},t,r){const n=r[0],a=t[0];return a.body&&1===a.body.length&&a.body[0].text&&sr.includes(a.body[0].text)&&a.body.push({type:"rule",mode:"math",shift:null,width:{number:0,unit:"pt"},height:{number:.5,unit:"em"}}),{type:"sqrt",mode:e.mode,body:a,index:n}},mathmlBuilder(e,t){const{body:r,index:n}=e;return n?new q.MathNode("mroot",[ie(r,t),ie(n,t.incrementLevel())]):new q.MathNode("msqrt",[ie(r,t)])}});const ir={display:0,text:1,script:2,scriptscript:3},lr={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]};l({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler({breakOnTokenText:e,funcName:t,parser:r},n){const a=r.parseExpression(!0,e,!0),o=t.slice(1,t.length-5);return{type:"styling",mode:r.mode,scriptLevel:o,body:a}},mathmlBuilder(e,t){const r=t.withLevel(ir[e.scriptLevel]),n=oe(e.body,r),a=k(n),o=lr[e.scriptLevel];return a.setAttribute("scriptlevel",o[0]),a.setAttribute("displaystyle",o[1]),a}});const cr=/^m(over|under|underover)$/;c({type:"supsub",mathmlBuilder(e,t){let r,n,a=!1,o=!1,s=!1,i=!1;e.base&&"horizBrace"===e.base.type&&(n=!!e.sup,n===e.base.isOver&&(a=!0,r=e.base.isOver)),!e.base||e.stack||"op"!==e.base.type&&"operatorname"!==e.base.type||(e.base.parentIsSupSub=!0,o=!e.base.symbol,s=o&&!e.isFollowedByDelimiter,i=e.base.needsLeadingSpace);const l=e.stack&&1===e.base.body.length?[ie(e.base.body[0],t)]:[ie(e.base,t)],c=t.inSubOrSup();if(e.sub){const r=ie(e.sub,c);3===t.level&&r.setAttribute("scriptlevel","2"),l.push(r)}if(e.sup){const r=ie(e.sup,c);if(3===t.level&&r.setAttribute("scriptlevel","2"),e.base&&e.base.text&&1===e.base.text.length){const t=e.base.text;"DHKLUcegorsuvxyzΠΥΨαδηιμνοτυχϵ".indexOf(t)>-1?r.classes.push("tml-sml-pad"):"BCEFGIMNOPQRSTXZlpqtwΓΘΞΣΦΩβεζθξρςφψϑϕϱ".indexOf(t)>-1?r.classes.push("tml-med-pad"):"AJdfΔΛ".indexOf(t)>-1&&r.classes.push("tml-lrg-pad")}l.push(r)}let u;if(a)u=r?"mover":"munder";else if(e.sub)if(e.sup){const r=e.base;u=r&&("op"===r.type&&r.limits||"multiscript"===r.type)&&(t.level===Le||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(t.level===Le||r.limits)?"munderover":"msubsup"}else{const r=e.base;u=e.stack||r&&"op"===r.type&&r.limits&&(t.level===Le||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===Le)?"munder":"msub"}else{const r=e.base;u=r&&"op"===r.type&&r.limits&&(t.level===Le||r.alwaysHandleSupSub)||r&&"operatorname"===r.type&&r.alwaysHandleSupSub&&(r.limits||t.level===Le)?"mover":"msup"}let p=new q.MathNode(u,l);if(o){const e=new q.MathNode("mo",[Q("⁡","text")]);if(i){const t=new q.MathNode("mspace");t.setAttribute("width","0.1667em"),p=q.newDocumentFragment([t,p,e])}else p=q.newDocumentFragment([p,e]);if(s){const e=new q.MathNode("mspace");e.setAttribute("width","0.1667em"),p.children.push(e)}}else cr.test(u)&&(p=new q.MathNode("mrow",[p]));return p}});const ur=["\\shortmid","\\nshortmid","\\shortparallel","\\nshortparallel","\\smallsetminus"],pr=["\\Rsh","\\Lsh","\\restriction"];c({type:"atom",mathmlBuilder(e,t){const r=new q.MathNode("mo",[Q(e.text,e.mode)]);if("punct"===e.family)r.setAttribute("separator","true");else if("open"===e.family||"close"===e.family)"open"===e.family?(r.setAttribute("form","prefix"),r.setAttribute("stretchy","false")):"close"===e.family&&(r.setAttribute("form","postfix"),r.setAttribute("stretchy","false"));else if("\\mid"===e.text)r.setAttribute("lspace","0.22em"),r.setAttribute("rspace","0.22em"),r.setAttribute("stretchy","false");else if("rel"===e.family&&(e=>{if(1===e.length){const t=e.codePointAt(0);return 8591<t&&t<8704}return e.indexOf("arrow")>-1||e.indexOf("harpoon")>-1||pr.includes(e)})(e.text))r.setAttribute("stretchy","false");else if(ur.includes(e.text))r.setAttribute("mathsize","70%");else if(":"===e.text)r.attributes.lspace="0.2222em",r.attributes.rspace="0.2222em";else if(e.needsSpacing)return"bin"===e.family?new q.MathNode("mrow",[be(.222),r,be(.222)]):new q.MathNode("mrow",[be(.2778),r,be(.2778)]);return r}});const mr={mathbf:"bold",mathrm:"normal",textit:"italic",mathit:"italic",mathnormal:"italic",mathbb:"double-struck",mathcal:"script",mathfrak:"fraktur",mathscr:"script",mathsf:"sans-serif",mathtt:"monospace"},dr=function(e,t){if("texttt"===t.fontFamily)return"monospace";if("textsc"===t.fontFamily)return"normal";if("textsf"===t.fontFamily)return"textit"===t.fontShape&&"textbf"===t.fontWeight?"sans-serif-bold-italic":"textit"===t.fontShape?"sans-serif-italic":"textbf"===t.fontWeight?"sans-serif-bold":"sans-serif";if("textit"===t.fontShape&&"textbf"===t.fontWeight)return"bold-italic";if("textit"===t.fontShape)return"italic";if("textbf"===t.fontWeight)return"bold";const r=t.font;if(!r||"mathnormal"===r)return null;const n=e.mode;switch(r){case"mathit":case"greekItalic":return"italic";case"mathrm":{const t=e.text.codePointAt(0);return 939<t&&t<975?"italic":"normal"}case"up@greek":return"normal";case"boldsymbol":case"mathboldsymbol":return"bold-italic";case"mathbf":return"bold";case"mathbb":return"double-struck";case"mathfrak":return"fraktur";case"mathscr":case"mathcal":return"script";case"mathsf":return"sans-serif";case"mathsfit":return"sans-serif-italic";case"mathtt":return"monospace"}let a=e.text;return M[n][a]&&M[n][a].replace&&(a=M[n][a].replace),Object.prototype.hasOwnProperty.call(mr,r)?mr[r]:null},hr=Object.freeze({B:8426,E:8427,F:8427,H:8387,I:8391,L:8390,M:8422,R:8393,e:8394,g:8355,o:8389}),gr=Object.freeze({C:8426,H:8388,I:8392,R:8394,Z:8398}),br=Object.freeze({C:8383,H:8389,N:8391,P:8393,Q:8393,R:8395,Z:8394}),fr=Object.freeze({"ϵ":119527,"ϑ":119564,"ϰ":119534,"φ":119577,"ϱ":119535,"ϖ":119563}),yr=Object.freeze({"ϵ":119643,"ϑ":119680,"ϰ":119650,"φ":119693,"ϱ":119651,"ϖ":119679}),xr=Object.freeze({"ϵ":119701,"ϑ":119738,"ϰ":119708,"φ":119751,"ϱ":119709,"ϖ":119737}),wr=Object.freeze({"ϵ":119759,"ϑ":119796,"ϰ":119766,"φ":119809,"ϱ":119767,"ϖ":119795}),vr=Object.freeze({upperCaseLatin:{normal:e=>0,bold:e=>119743,italic:e=>119795,"bold-italic":e=>119847,script:e=>hr[e]||119899,"script-bold":e=>119951,fraktur:e=>gr[e]||120003,"fraktur-bold":e=>120107,"double-struck":e=>br[e]||120055,"sans-serif":e=>120159,"sans-serif-bold":e=>120211,"sans-serif-italic":e=>120263,"sans-serif-bold-italic":e=>120380,monospace:e=>120367},lowerCaseLatin:{normal:e=>0,bold:e=>119737,italic:e=>"h"===e?8358:119789,"bold-italic":e=>119841,script:e=>hr[e]||119893,"script-bold":e=>119945,fraktur:e=>119997,"fraktur-bold":e=>120101,"double-struck":e=>120049,"sans-serif":e=>120153,"sans-serif-bold":e=>120205,"sans-serif-italic":e=>120257,"sans-serif-bold-italic":e=>120309,monospace:e=>120361},upperCaseGreek:{normal:e=>0,bold:e=>119575,italic:e=>119633,"bold-italic":e=>119575,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119749,"sans-serif-bold":e=>119749,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119807,monospace:e=>0},lowerCaseGreek:{normal:e=>0,bold:e=>119569,italic:e=>119627,"bold-italic":e=>"ϕ"===e?119678:119685,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>119743,"sans-serif-bold":e=>119743,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>119801,monospace:e=>0},varGreek:{normal:e=>0,bold:e=>fr[e]||-51,italic:e=>0,"bold-italic":e=>yr[e]||58,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>0,"sans-serif":e=>xr[e]||116,"sans-serif-bold":e=>xr[e]||116,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>wr[e]||174,monospace:e=>0},numeral:{normal:e=>0,bold:e=>120734,italic:e=>0,"bold-italic":e=>0,script:e=>0,"script-bold":e=>0,fraktur:e=>0,"fraktur-bold":e=>0,"double-struck":e=>120744,"sans-serif":e=>120754,"sans-serif-bold":e=>120764,"sans-serif-italic":e=>0,"sans-serif-bold-italic":e=>0,monospace:e=>120774}}),kr=(e,t)=>{const r=e.codePointAt(0),n=64<r&&r<91?"upperCaseLatin":96<r&&r<123?"lowerCaseLatin":912<r&&r<938?"upperCaseGreek":944<r&&r<970||"ϕ"===e?"lowerCaseGreek":120545<r&&r<120572||fr[e]?"varGreek":47<r&&r<58?"numeral":"other";return"other"===n?e:String.fromCodePoint(r+vr[n][t](e))},qr=Object.freeze({a:"ᴀ",b:"ʙ",c:"ᴄ",d:"ᴅ",e:"ᴇ",f:"ꜰ",g:"ɢ",h:"ʜ",i:"ɪ",j:"ᴊ",k:"ᴋ",l:"ʟ",m:"ᴍ",n:"ɴ",o:"ᴏ",p:"ᴘ",q:"ǫ",r:"ʀ",s:"s",t:"ᴛ",u:"ᴜ",v:"ᴠ",w:"ᴡ",x:"x",y:"ʏ",z:"ᴢ"}),_r=/^\d(?:[\d,.]*\d)?$/,Ar=/[A-Ba-z]/,Sr=new Set(["\\prime","\\dprime","\\trprime","\\qprime","\\backprime","\\backdprime","\\backtrprime"]);c({type:"mathord",mathmlBuilder(e,t){const r=Q(e.text,e.mode,t),n=r.text.codePointAt(0),a=912<n&&n<938?"normal":"italic",o=dr(e,t)||a;if("script"===o)return r.text=kr(r.text,o),new q.MathNode("mi",[r],[t.font]);"italic"!==o&&(r.text=kr(r.text,o));let s=new q.MathNode("mi",[r]);return"normal"===o&&(s.setAttribute("mathvariant","normal"),1===r.text.length&&(s=new q.MathNode("mpadded",[s]),s.setAttribute("lspace","0"))),s}}),c({type:"textord",mathmlBuilder(e,t){let r=e.text;const n=r.codePointAt(0);"textsc"===t.fontFamily&&96<n&&n<123&&(r=qr[r]);const a=Q(r,e.mode,t),o=dr(e,t)||"normal";let s;if(_r.test(e.text)){const t="text"===e.mode?"mtext":"mn";if("italic"===o||"bold-italic"===o)return((e,t,r)=>{const n=new q.MathNode(r,[e]),a=new q.MathNode("mstyle",[n]);return a.style["font-style"]="italic",a.style["font-family"]="Cambria, 'Times New Roman', serif","bold-italic"===t&&(a.style["font-weight"]="bold"),a})(a,o,t);"normal"!==o&&(a.text=a.text.split("").map(e=>kr(e,o)).join("")),s=new q.MathNode(t,[a])}else if("text"===e.mode)"normal"!==o&&(a.text=kr(a.text,o)),s=new q.MathNode("mtext",[a]);else if(Sr.has(e.text))s=new q.MathNode("mo",[a]),s.classes.push("tml-prime");else{const e=a.text;"italic"!==o&&(a.text=kr(a.text,o)),s=new q.MathNode("mi",[a]),a.text===e&&Ar.test(e)&&s.setAttribute("mathvariant","italic")}return s}});const Nr={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},Tr={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};c({type:"spacing",mathmlBuilder(t,r){let n;if(Object.prototype.hasOwnProperty.call(Tr,t.text))n=new q.MathNode("mtext",[new q.TextNode(" ")]);else{if(!Object.prototype.hasOwnProperty.call(Nr,t.text))throw new e(`Unknown type of space "${t.text}"`);n=new q.MathNode("mo"),"\\nobreak"===t.text&&n.setAttribute("linebreak","nobreak")}return n}}),c({type:"tag"});const $r={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm","\\textsc":"textsc"},Br={"\\textbf":"textbf","\\textmd":"textmd"},Mr={"\\textit":"textit","\\textup":"textup"};l({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textsc","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler({parser:e,funcName:t},r){const n=r[0];return{type:"text",mode:e.mode,body:p(n),font:t}},mathmlBuilder(e,t){const r=((e,t)=>{const r=e.font;return r?$r[r]?t.withTextFontFamily($r[r]):Br[r]?t.withTextFontWeight(Br[r]):"\\emph"===r?"textit"===t.fontShape?t.withTextFontShape("textup"):t.withTextFontShape("textit"):t.withTextFontShape(Mr[r]):t})(e,t),n=se(e.body,r);return ee(n)}}),l({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:({parser:e},t)=>({type:"vcenter",mode:e.mode,body:t[0]}),mathmlBuilder(e,t){const r=new q.MathNode("mtd",[ie(e.body,t)]);r.style.padding="0";const n=new q.MathNode("mtr",[r]);return new q.MathNode("mtable",[n])}}),l({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(t,r,n){throw new e("\\verb ended by end of line instead of matching delimiter")},mathmlBuilder(e,t){const r=new q.TextNode(Or(e)),n=new q.MathNode("mtext",[r]);return n.setAttribute("mathvariant","monospace"),n}});const Or=e=>e.body.replace(/ /g,e.star?"␣":" ");"undefined"!=typeof document&&"CSS1Compat"!==document.compatMode&&"undefined"!=typeof console&&console.warn("Warning: Temml doesn't work in quirks mode. Make sure your website has a suitable doctype.")}}});
