<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>pipen_report.preprocess - pipen-report</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/all.css" rel="stylesheet" />
        <link href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css" rel="stylesheet" />
        <link href="../../css/mkapi-common.css" rel="stylesheet" />
        <link href="../../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "pipen_report.preprocess";
        var mkdocs_page_input_path = "api/pipen_report.preprocess.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.configure({ ignoreUnescapedHTML: true }); hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../..">
          <img src="../../logo.png" class="logo" alt="Logo"/>
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="nav-scrollable-wrapper">
      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../configurations/">Configurations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../cli/">CLI tools</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../folder-structure/">Folder structure</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../rendering/">Template rendering</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../writing/">Writing report templates</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../filters/">Filters for rendering</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">pipen_report</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report/">pipen_report</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.report_manager/">pipen_report.report_manager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.report_plugin/">pipen_report.report_plugin</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.utils/">pipen_report.utils</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.cli/">pipen_report.cli</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.filters/">pipen_report.filters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../pipen_report.versions/">pipen_report.versions</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">pipen_report.preprocess</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#pipen_reportpreprocesspreprocess">preprocess</a>
    </li>
    </ul>
                </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../CHANGELOG/">Change Log</a>
                </li>
              </ul>
      </div>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">pipen-report</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API</li>
          <li class="breadcrumb-item">pipen_report</li>
      <li class="breadcrumb-item active">pipen_report.preprocess</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/pwwang/pipen-report/edit/master/docs/api/pipen_report.preprocess.md">Edit on pwwang/pipen-report</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="mkapi-node" id="pipen_report.preprocess">
<div class='mkapi-object-container'>
  <div class="mkapi-object module plain top">
    <div class="mkapi-object-kind module top">module</div>
    <h2 id="pipen_reportpreprocess" class="mkapi-object-body module top"><span class="mkapi-object-prefix"><a href="../pipen_report/#pipen_report">pipen_report</a>.</span><span class="mkapi-object-name">preprocess</span></h2>
  </div>
  <div class="mkapi-src-link">
    <a class="mkapi-src-link" href="../source/pipen_report.preprocess/#pipen_report.preprocess" title="Source for pipen_report.preprocess">&lt;/&gt;</a>
  </div>
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Provides preprocess</p></div>
    </div>
  <div class="mkapi-section attributes">
      <div class="mkapi-section-name attributes">
          <span class="mkapi-section-name-body attributes">Attributes</span> 
        </div>
      <div class="mkapi-section-body attributes"><ul class="mkapi-items">




<li><code class="mkapi-item-name">TAG_ATTR_RE</code>

<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">,re.VERBOSE | re.DOTALL,
)<br>
def _preprocess_slash_h(
source: str,
index: int,
page: int,
kind: str,
text: str | None = None,
) -&gt; Tuple[str, Mapping[str, Any]]:
"""Preprocess headings (h1 or h2 tag) adding anchor links<br>
Add an anchor link after the tag and produce the toc dict<br>
For example, if the source is <code>&lt;h1&gt;Title 1&lt;/h1&gt;</code>, the output will be
<code>&lt;h1&gt;Title 1&lt;/h1&gt;&lt;a id="prt-h1-1-title-1" class="pipen-report-toc-anchor"&gt; &lt;/a&gt;</code><br>
Args:
text: The string repr of the tag (e.g <code>&lt;h1&gt;Title 1&lt;/h1&gt;</code>)
index: The index of this kind of heading in the document
page: Which page are we on?
kind: h1 or h2
</span></li>



</ul></div>
    </div>
  <div class="mkapi-section functions">
      <div class="mkapi-section-name functions">
          <span class="mkapi-section-name-body functions">Functions</span> 
        </div>
      <div class="mkapi-section-body functions"><ul class="mkapi-items">
<li class="function"><code class="mkapi-item-name"><a href="#pipen_report.preprocess.preprocess">preprocess</a></code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">text</code>, <code class="mkapi-object-signature">basedir</code>, <code class="mkapi-object-signature">toc_switch</code>, <code class="mkapi-object-signature">paging</code>, <code class="mkapi-object-signature">relpath_tags</code>, <code class="mkapi-object-signature">logfn</code><code class="mkapi-object-parenthesis">)</code>
<span class="mkapi-item-type">(Tuple)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Preprocess the rendered report and return the toc dict<a class="mkapi-src-link" href="../source/pipen_report.preprocess/#pipen_report.preprocess.preprocess" title="Source for pipen_report.preprocess.preprocess">&lt;/&gt;</a></span></li>


</ul></div>
    </div>
  </div>

</div>

<div class="mkapi-node" id="pipen_report.preprocess.preprocess">
<div class='mkapi-object-container'>
  <div class="mkapi-object function code top">
    <div class="mkapi-object-kind function top">function</div>
    <h3 id="pipen_reportpreprocesspreprocess" class="mkapi-object-body function top"><code class="mkapi-object-prefix"><a href="#pipen_report.preprocess">pipen_report.preprocess</a>.</code><code class="mkapi-object-name">preprocess</code><code class="mkapi-object-parenthesis">(</code><code class="mkapi-object-signature">text</code>, <code class="mkapi-object-signature">basedir</code>, <code class="mkapi-object-signature">toc_switch</code>, <code class="mkapi-object-signature">paging</code>, <code class="mkapi-object-signature">relpath_tags</code>, <code class="mkapi-object-signature">logfn</code><code class="mkapi-object-parenthesis">)</code></h3>
  </div>
  <div class="mkapi-src-link">
    <a class="mkapi-src-link" href="../source/pipen_report.preprocess/#pipen_report.preprocess.preprocess" title="Source for pipen_report.preprocess.preprocess">&lt;/&gt;</a>
  </div>
</div>
<div class="mkapi-docstring">
<div class="mkapi-section">
      <div class="mkapi-section-body"><p>Preprocess the rendered report and return the toc dict</p><p>This is not only faster than using a xml/html parsing library but also
more compatible with JSX, as most python xml/html parser cannot handle
JSX</p>
<p>We use h1 and h2 tags to form TOCs. h1 and h2 tags have to be at the
top level, which means you should not wrap them with any container in
your svelte report template.</p>
<p>h1 tag should be the first tag in the document after <code>&lt;/script&gt;</code>. Otherwise
those non-h1 tags will appear in all pages and the relative paths won't
be parsed.</p>
</div>
    </div>
  <div class="mkapi-section parameters">
      <div class="mkapi-section-name parameters">
          <span class="mkapi-section-name-body parameters">Parameters</span> 
        </div>
      <div class="mkapi-section-body parameters"><ul class="mkapi-items">
<li><code class="mkapi-item-name">text</code>
<span class="mkapi-item-type">(str)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">The rendered report</span></li>

<li><code class="mkapi-item-name">basedir</code>
<span class="mkapi-item-type">(Path)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">The base directory</span></li>

<li><code class="mkapi-item-name">toc_switch</code>
<span class="mkapi-item-type">(bool)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Whether render a TOC?</span></li>

<li><code class="mkapi-item-name">paging</code>
<span class="mkapi-item-type">(Union)</span>
<span class="mkapi-item-dash">&mdash;</span> <span class="mkapi-item-description">Number of h1's in a pageFalse to disable
</span></li>




</ul></div>
    </div>
  <div class="mkapi-section returns">
      <div class="mkapi-section-name returns">
          <span class="mkapi-section-name-body returns">Returns</span> <span class="mkapi-item-type">(Tuple)</span>
        </div>
      <div class="mkapi-section-body returns"><p>The preprocessed text and the toc dict</p></div>
    </div>
  </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../pipen_report.versions/" class="btn btn-neutral float-left" title="pipen_report.versions"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../CHANGELOG/" class="btn btn-neutral float-right" title="Change Log">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  <div class="footer-notes">
    <a href="https://github.com/pwwang/pipen-report" title="Open repository in GitHub">Github Repo</a>
    <div class="footer-sep"></div>Built with <a href="https://www.mkdocs.org/">MkDocs</a> using theme <a href="https://github.com/pwwang/mkdocs-rtd">mkdocs-rtd</a>.
  </div>
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../pipen_report.versions/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../CHANGELOG/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
    <script src="../../js/version-select.js"></script>
      <script src="../../js/mkapi.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
